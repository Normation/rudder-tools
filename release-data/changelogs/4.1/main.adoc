= Change logs for Rudder 4.1

Rudder 4.1 is currently a maintained *`ESR' (Extended Support Release)*
of Rudder.

This page provides a summary of changes for each version. Previous beta
and rc versions are listed below for convenience.

*Main new features in Rudder 4.1:*

* Organize Rules and Directives by setting key=value tags (using UI or
REST API)
* Add or remove Node properties directly in the web interface
* Share files between Nodes (via new generic methods)
* Trigger agent runs on Nodes via relay servers without modifying your
network configuration
* Many Techniques renamed to be more explicit and now displayed in
alphabetical order to make finding them easier
* Customize Rudder behavior with the new hook system based on
server-side actions
* Improved user experience, overall improvement of web performance (web
resources are cached), many minor UI tweaks (page titles, forms,
buttons, filters, â€¦)
* Switched to a new graph rendering library, fixing all performance
issues with Firefox
* Agent package now embeds OpenSSL on unmaintained Debian/Ubuntu
distributions (Debian 5, Debian 6, Ubuntu 12.04, Ubuntu 12.10) as well
as unmaintained RHEL/SLES distributions.
* New plugin packaging system for easier plugin management
* New plugin `data sources': Automatically import Node properties from
external REST APIs

*Installing, upgrading and testing*

* Install docs:
https://www.rudder-project.org/doc-4.1/_installation.html
* Upgrade docs: https://www.rudder-project.org/doc-4.1/_upgrade.html
* Download links:
https://www.rudder-project.org/site/get-rudder/downloads/

We also recommend using the
https://github.com/Normation/rudder-vagrant[Rudder Vagrant] config if
you want a quick and easy way to get an installation for testing.

*IMPORTANT:* Rudder 4.1 requires Java RE (version 8 at least)

*Operating systems supported*

This version provides packages for these operating systems:

* Rudder server and Rudder relay: *Debian 7, Debian 8, Debian 9,
RHEL/CentOS 6, RHEL/CentOS 7 (64 bits), SLES 11, SLES 12, Ubuntu 14.04,
Ubuntu 16.04*
* Rudder agent: all of the above plus *Debian 5, Debian 6, RHEL/CentOS
3, RHEL/CentOS 5, CentOS 7 (32 bits), Fedora 18, SLES 10, SLES 12,
Ubuntu 10.04, Ubuntu 12.04, Ubuntu 12.10, Ubuntu 18.04*
* Rudder agent (binary packages available from
http://www.normation.com[Normation]): *Windows Server 2008-2012, AIX
5-6-7*

*Note*: As of Rudder 4.1, the rudder-agent-thin and rudder-server-relay
packages are no longer available in Debian 5, Debian 6, Ubuntu 10.04,
Ubuntu 12.10, Fedora 18, RHEL/CentOS 3 and RHEL/CentOS 5

== Rudder 4.1.24 (2019-07-08)

=== Changes

==== Architecture - Internal libs

* Using move into non existing branch failed but delete the source
    (https://issues.rudder.io/issues/3591[#3591])

=== Bug fixes

==== Security

* Fixed: Arbitrary command execution in rudder relay API due to missing parameter sanitization
    (https://issues.rudder.io/issues/14974[#14974])

==== Web - UI & UX

* Fixed: Loading animation on 404 page is broken
    (https://issues.rudder.io/issues/15105[#15105])

==== Techniques

* Fixed: Use umask defined in /etc/login.defs in Technique "SSH authorized keys"  for creating missing home dir 
    (https://issues.rudder.io/issues/14916[#14916])

==== Generic methods

* Fixed: Style test fails because it parses .pyc files 
    (https://issues.rudder.io/issues/15061[#15061])

=== Release notes

Special thanks go out to the following individuals who invested time, patience, testing, patches or bug reports to make this version of Rudder better:


This is a bug fix release in the 4.1 series and therefore all installations of 4.1.x should be upgraded when possible. When we release a new version of Rudder it has been thoroughly tested, and we consider the release enterprise-ready for deployment.

== Rudder 4.1.23 (2019-05-21)

=== Changes

=== Bug fixes

==== Web - Config management

* Fixed: "Dynamic group update time-outed (waited for 10 secondes to finish)" 
    (https://issues.rudder.io/issues/14918[#14918])

=== Release notes

Special thanks go out to the following individuals who invested time, patience, testing, patches or bug reports to make this version of Rudder better:


This is a bug fix release in the 4.1 series and therefore all installations of 4.1.x should be upgraded when possible. When we release a new version of Rudder it has been thoroughly tested, and we consider the release enterprise-ready for deployment.

== Rudder 4.1.22 (2019-05-14)

=== Changes

=== Bug fixes

==== Packaging

* Fixed: ncf-api-virtualenv does not have a group created
    (https://issues.rudder.io/issues/11126[#11126])
* Fixed: Debian 8 packages fail to build  
    (https://issues.rudder.io/issues/14754[#14754])

==== Performance and scalability

* Fixed: Correct disk usage in rudder configuration file 
    (https://issues.rudder.io/issues/14844[#14844])
* Fixed: Default archive retention is too large, which cause very large disk usage 
    (https://issues.rudder.io/issues/14834[#14834])

==== Web - Config management

* Fixed: Accepting a change request on dynamic group, make the group empty leads an invalid policy generation 
    (https://issues.rudder.io/issues/14758[#14758])
* Fixed: When restoring archive (full or groups) dynamic groups are created empty
    (https://issues.rudder.io/issues/4480[#4480])

==== Web - Maintenance

* Fixed: Invalid comparison of String and Option[String] in HistorizationService 
    (https://issues.rudder.io/issues/14770[#14770])

==== Techniques

* Fixed: Technique "SSH authorized keys" creates home directory with perms root:root when it does not exists yet 
    (https://issues.rudder.io/issues/14732[#14732])

==== Agent

* Fixed: Rudder agent check cannot restore saved uuid on AIX 
    (https://issues.rudder.io/issues/14763[#14763])

=== Release notes

Special thanks go out to the following individuals who invested time, patience, testing, patches or bug reports to make this version of Rudder better:

* Janos Mattyasovszky

This is a bug fix release in the 4.1 series and therefore all installations of 4.1.x should be upgraded when possible. When we release a new version of Rudder it has been thoroughly tested, and we consider the release enterprise-ready for deployment.

== Rudder 4.1.21 (2019-04-15)

=== Changes

=== Bug fixes

==== Packaging

* Fixed: When installing rudder-agent, there's a long wait of run interval/2, so up to several hours
    (https://issues.rudder.io/issues/14644[#14644])
* Fixed: During installation of the agent, when staring "rudder agent" service, there is numerous error about missing '/opt/rudder/etc/uuid.hive' file
    (https://issues.rudder.io/issues/14616[#14616])
* Fixed: Debian 8 backports repository does not exist anymore, breaking our builds
    (https://issues.rudder.io/issues/14608[#14608])
* Fixed: Error message when installing rudder-agent  on rpm based systems due to missing directory '/var/rudder/inventories'
    (https://issues.rudder.io/issues/14348[#14348])

==== System integration

* Fixed: Only one Node below a Rudder server can be run through remote run API
    (https://issues.rudder.io/issues/14391[#14391])

==== Documentation

* Fixed: uuid.hive is not present afet an install or an upgradie ofrudder agent to latest 4.1.x, 4.3.x and 5.0.x on rpm system purges the uuid.hive
    (https://issues.rudder.io/issues/14264[#14264])

==== Web - Nodes & inventories

* Fixed: Error about failed  move of machine inventory doesn't give sufficient context information
    (https://issues.rudder.io/issues/14522[#14522])

==== Performance and scalability

* Fixed: If a rule targets too many groups, policy generation fails
    (https://issues.rudder.io/issues/14392[#14392])
* Fixed: Cron job checking rudder agent health, is ran every  5 minutes exactly, causing resource usage spike
    (https://issues.rudder.io/issues/14258[#14258])

==== Generic methods - Package Management

* Fixed: Broken yum usage with old package promises on CentOS
    (https://issues.rudder.io/issues/14546[#14546])

==== Web - Technique editor

* Fixed: Reporting fails on NCF when service start/stop is guarded by a class
    (https://issues.rudder.io/issues/14404[#14404])

=== Release notes

Special thanks go out to the following individuals who invested time, patience, testing, patches or bug reports to make this version of Rudder better:

* Janos Mattyasovszky

This is a bug fix release in the 4.1 series and therefore all installations of 4.1.x should be upgraded when possible. When we release a new version of Rudder it has been thoroughly tested, and we consider the release enterprise-ready for deployment.

== Rudder 4.1.20 (2019-02-28)

=== Changes

=== Bug fixes

==== System integration

* Fixed: Patch cf-serverd to change loglevel on agent refusal
    (https://issues.rudder.io/issues/8529[#8529])

==== Packaging

* Fixed: "/var/rudder/inventories: no such dir" error message on first run
    (https://issues.rudder.io/issues/14257[#14257])

==== Documentation

* Fixed: Root of webapp docs changed
    (https://issues.rudder.io/issues/14284[#14284])

==== Architecture - Dependencies

* Fixed: Compilation fails with Java 11
    (https://issues.rudder.io/issues/14290[#14290])

==== Web - Nodes & inventories

* Fixed: Mandatory fields for new inventories are not correctly checked 
    (https://issues.rudder.io/issues/13962[#13962])

==== Techniques

* Fixed: unexpected reports in zypper repo management technique
    (https://issues.rudder.io/issues/14347[#14347])

==== System techniques

* Fixed: Technique uses /root as an hardcoded value for the home of user root
    (https://issues.rudder.io/issues/6412[#6412])

==== Generic methods - File Management

* Fixed: File lines absent generic method doesn't report anything when the file doesn't exist
    (https://issues.rudder.io/issues/14246[#14246])

==== Generic methods

* Fixed: ncf 4.1 is not compatible anymore with agent 3.1
    (https://issues.rudder.io/issues/14293[#14293])

=== Release notes

Special thanks go out to the following individuals who invested time, patience, testing, patches or bug reports to make this version of Rudder better:


This is a bug fix release in the 4.1 series and therefore all installations of 4.1.x should be upgraded when possible. When we release a new version of Rudder it has been thoroughly tested, and we consider the release enterprise-ready for deployment.

== Rudder 4.1.19 (2019-01-30)

=== Changes

==== Web - Maintenance

* Update links in Rudder interface to use rudder.io
    (https://issues.rudder.io/issues/14205[#14205])

==== Technique editor - UI/UX

* Manage caching of technique editor resources (css/js) with Rudder version
    (https://issues.rudder.io/issues/14194[#14194])

=== Bug fixes

==== Packaging

* Fixed: "rudder-init" script does not allow the "auto" option
    (https://issues.rudder.io/issues/14134[#14134])
* Fixed: Force http 1.1 when downloading curl as packaging source
    (https://issues.rudder.io/issues/14059[#14059])

==== Web - Compliance & node report

* Fixed: we can inject html & javascript in Rudder tables
    (https://issues.rudder.io/issues/14221[#14221])

==== Performance and scalability

* Fixed: Index nodeid_idx is not used and consumes a lot of disk space for nothing
    (https://issues.rudder.io/issues/14149[#14149])

==== Web - Config management

* Fixed: When hooks are exiting with an error we can have stackoverflow error if there are many of them
    (https://issues.rudder.io/issues/10973[#10973])
* Fixed: When refreshing a rule details, the current tab is not memorized
    (https://issues.rudder.io/issues/4904[#4904])

==== Techniques

* Fixed: Technique "file content from remote template" does not work on the Rudder server when using remote file
    (https://issues.rudder.io/issues/14211[#14211])
* Fixed: "File content from remote template" technique ads tabs in the output file
    (https://issues.rudder.io/issues/14188[#14188])

==== System techniques

* Fixed: improve error message when the node cannot get the uuid from the server
    (https://issues.rudder.io/issues/14176[#14176])

==== Generic methods

* Fixed: Avoid  checking for exit_on_lock option on newer yum
    (https://issues.rudder.io/issues/14235[#14235])
* Fixed: Enable 4h cache on available upgrades list in old package bodies
    (https://issues.rudder.io/issues/14225[#14225])
* Fixed: file_from_string_mustache GM unwanted behaviour when the mustache template use non-printable elements
    (https://issues.rudder.io/issues/14215[#14215])

==== Documentation

* Fixed: Jinja templating iteration example in the doc is invalid
    (https://issues.rudder.io/issues/14179[#14179])

==== Generic methods - File Management

* Fixed: Jinja templating method does not correctly clean up temporary files in audit mode
    (https://issues.rudder.io/issues/13666[#13666])

=== Release notes

Special thanks go out to the following individuals who invested time, patience, testing, patches or bug reports to make this version of Rudder better:


This is a bug fix release in the 4.1 series and therefore all installations of 4.1.x should be upgraded when possible. When we release a new version of Rudder it has been thoroughly tested, and we consider the release enterprise-ready for deployment.

== Rudder 4.1.18 (2019-01-10)

=== Changes

==== Techniques

* Download files needed to build rudder-techniques package from repository.rudder.io
    ([#14036](https://issues.rudder.io/issues/14036))

=== Bug fixes

==== Packaging

* Fixed: uuid.hive file should not be a rudder-agent package conf file
    ([#14062](https://issues.rudder.io/issues/14062))
* Fixed: When installing a rudder root server (on debian), it asks to run rudder-node-to-relay
    ([#11630](https://issues.rudder.io/issues/11630))

==== Miscellaneous

* Fixed: Rudder-jetty depends on jdk8 but always try to install jdk9 as dependency
    ([#14024](https://issues.rudder.io/issues/14024))

==== Documentation

* Fixed: Broken 4.1/4.3 doc build
    ([#14048](https://issues.rudder.io/issues/14048))

==== Web - Config management

* Fixed: Cannot modify groups when workflow are enabled
    ([#14056](https://issues.rudder.io/issues/14056))

==== Web - UI & UX

* Fixed: In the node details, clicking on the link to the policy server doesn't redirect to the policy server
    ([#13834](https://issues.rudder.io/issues/13834))

==== Generic methods

* Fixed: Error in the info (rudder agent run -i) output of the agent at first run
    ([#13951](https://issues.rudder.io/issues/13951))

=== Release notes

Special thanks go out to the following individuals who invested time, patience, testing, patches or bug reports to make this version of Rudder better:


This is a bug fix release in the 4.1 series and therefore all installations of 4.1.x should be upgraded when possible. When we release a new version of Rudder it has been thoroughly tested, and we consider the release enterprise-ready for deployment.

== Rudder 4.1.17 (2018-11-26)

=== Changes

=== Bug fixes

==== Agent

* Fixed: Upgrade CFEngine to 3.10.5
(https://issues.rudder.io/issues/13851[#13851])
* Fixed: ``rudder-keys change-key'' does not check for key file
existence (https://issues.rudder.io/issues/12496[#12496])
* Fixed: When ``policy-server.dat'' is missing, generated inventory is
not legit (https://issues.rudder.io/issues/11715[#11715])
* Fixed: /var/log/rudder/agent-check/check.log should contains only
error level messages (https://issues.rudder.io/issues/12230[#12230])
* Fixed: rudder remote run error, and unable to pass -i option
(https://issues.rudder.io/issues/11318[#11318])
* Fixed: Command ``rudder remote run -a'' does not warn about missing
token (https://issues.rudder.io/issues/11417[#11417])
* Fixed: Command ``rudder agent reset'' sets incorrect permission in
/var/rudder/cfengine-community/inputs
(https://issues.rudder.io/issues/12410[#12410])
* Fixed: ``rudder agent info'' returns invalid report mode for not yet
accepted nodes (https://issues.rudder.io/issues/12992[#12992])

==== Packaging

* Fixed: On rudder-webapp upgrade, ncf.conf file is not committed
(https://issues.rudder.io/issues/13679[#13679])

==== System integration

* Fixed: ``rudder-pkg enable-all'' command fails when a plugin has no
jar (https://issues.rudder.io/issues/13785[#13785])

==== Web - Config management

* Fixed: The password field allows storing a password without any
selected hash (https://issues.rudder.io/issues/12198[#12198])
* Fixed: Add full path to shared-folder in description of ``Download
file from shared folder'' Technique
(https://issues.rudder.io/issues/13530[#13530])

==== Web - UI & UX

* Fixed: Quotes in reports are displayed as " in the web interface
(https://issues.rudder.io/issues/13349[#13349])
* Fixed: Upgrade loading wheel with a new look
(https://issues.rudder.io/issues/8622[#8622])
* Fixed: On Dashboard, when we have 100% of something, the pie is
including a confusing white line
(https://issues.rudder.io/issues/12233[#12233])
* Fixed: Remove static ids in Password section
(https://issues.rudder.io/issues/13457[#13457])

==== Web - Nodes & inventories

* Fixed: When a node is deleted, its generated promises are not removed
(https://issues.rudder.io/issues/4709[#4709])
* Fixed: Inventory keeps its key certified when node is deleted
(https://issues.rudder.io/issues/9149[#9149])
* Fixed: Missing gateway, network in network interface details
(https://issues.rudder.io/issues/13804[#13804])
* Fixed: Network group criteria not working
(https://issues.rudder.io/issues/13772[#13772])
* Fixed: The error message for bad inventory signature is unclear
(https://issues.rudder.io/issues/9192[#9192])
* Fixed: Network, mask and gateway not correctly parsed from inventory
(https://issues.rudder.io/issues/13803[#13803])

==== API

* Fixed: Remove old ``machyne type'' api Rest typo since it should not
be called anymore (https://issues.rudder.io/issues/13795[#13795])
* Fixed: Tags in rules are ignored in POST API
(https://issues.rudder.io/issues/13374[#13374])

==== Techniques

* Fixed: Option description for ``File download (Rudder server)''
technique is misleading (https://issues.rudder.io/issues/13887[#13887])
* Fixed: Technique ``Cron job v3.0'' does not use the ``user'' setting
with predefined scheduled (https://issues.rudder.io/issues/8004[#8004])
* Fixed: Broken reporting when copying a directory from the Rudder
server without specifying the trailing / in the destination
(https://issues.rudder.io/issues/13290[#13290])
* Fixed: Details of usage of technique ``Variable from command output
(string)'' is not clear (https://issues.rudder.io/issues/12058[#12058])
* Fixed: Technique ``cron job'' refuses task user name if it contains
hyphen (https://issues.rudder.io/issues/12960[#12960])

==== Generic methods - File Management

* Fixed: Generic Method ``permission dirs'' incorrect reporting when
target path is a file (https://issues.rudder.io/issues/10689[#10689])
* Fixed: ``File key-value present'' Generic Method and ``Manage
keys-values in file'' Technique does not support | as separator
(https://issues.rudder.io/issues/13562[#13562])

==== Generic methods

* Fixed: Generic method ``File_remove'' can delete empty directories
(https://issues.rudder.io/issues/12857[#12857])
* Fixed: Scheduler classes have incomplete labels
(https://issues.rudder.io/issues/8008[#8008])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* vlycop Doo
* Florian Heigl
* Janos Mattyasovszky
* Romain Quinaud

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.16 (2018-11-06)

=== Changes

==== Documentation

* Document zypper pattern usage in the ``Package state'' generic method
documentation
(https://www.rudder-project.org/redmine/issues/13725[#13725])

=== Bug fixes

==== Generic methods

* Fixed: Generic method ``Sharedfile to node'' always return repaired
status (https://www.rudder-project.org/redmine/issues/13753[#13753])
* Fixed: Unit tests for generic method ``File from a Jinja2 template''
fail on Ubuntu12 on Rudder 4.1
(https://www.rudder-project.org/redmine/issues/13747[#13747])
* Fixed: Time lib may not work when the first non-loopback interface has
no ip address
(https://www.rudder-project.org/redmine/issues/13744[#13744])
* Fixed: Remove comment about classes_generic_two being deprecated
(https://www.rudder-project.org/redmine/issues/13286[#13286])
* Fixed: Style test nbsp_is_not_allowed.sh always fails, missing 4.1
version of 13637
(https://www.rudder-project.org/redmine/issues/13722[#13722])
* Fixed: Add more tests for the schedule lib in ncf
(https://www.rudder-project.org/redmine/issues/13668[#13668])
* Fixed: Zypper patterns tests should not be executed on non sles os
(https://www.rudder-project.org/redmine/issues/13638[#13638])

==== Generic methods - File Management

* Fixed: Generic Method ``File copy from remote source'' does not report
when copying a directory
(https://www.rudder-project.org/redmine/issues/13634[#13634])

==== Documentation

* Fixed: Broken doc build
(https://www.rudder-project.org/redmine/issues/13734[#13734])

==== Agent

* Fixed: Redhat Openstack Nova compute QEMU virtual machines are seen as
physical (https://www.rudder-project.org/redmine/issues/10265[#10265])
* Fixed: Mustache templating in audit mode always considers destination
compliant once it exists
(https://www.rudder-project.org/redmine/issues/13664[#13664])

==== Packaging

* Fixed: Fusioninventory error about uninitialized value $FQDN
(https://www.rudder-project.org/redmine/issues/13739[#13739])
* Fixed: Rudder syslog port is reset after upgrade on Ubuntu (< 14)
Servers (https://www.rudder-project.org/redmine/issues/12714[#12714])

==== Performance and scalability

* Fixed: LDAP IO error on generation with a lot of nodes
(https://www.rudder-project.org/redmine/issues/13256[#13256])

==== Techniques

* Fixed: Sharing files with ``root'' does not work
(https://www.rudder-project.org/redmine/issues/10605[#10605])
* Fixed: Add a bigger warning about full path in ``Download a file''
technique (https://www.rudder-project.org/redmine/issues/13646[#13646])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Ilan COSTA
* JÃ©rÃ©my HOCDÃ‰
* Janos Mattyasovszky

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.15 (2018-10-19)

=== Changes

==== Packaging

* Upgrade openssl
(https://www.rudder-project.org/redmine/issues/13316[#13316])
* Add sles 15 support to rudder-packages
(https://www.rudder-project.org/redmine/issues/13295[#13295])
* Download sources from repository.rudder.io instead of
www.normation.com
(https://www.rudder-project.org/redmine/issues/13172[#13172])

==== Generic methods - Package Management

* Add a package provider for zypper patterns
(https://www.rudder-project.org/redmine/issues/12164[#12164])

=== Bug fixes

==== Generic methods

* Fixed: Allow to report on same reporting parameters
(https://www.rudder-project.org/redmine/issues/13632[#13632])
* Fixed: still some typos in package tests
(https://www.rudder-project.org/redmine/issues/13591[#13591])
* Fixed: some ncf test are failing on SLES because they are trying to
deal with packages that are not available
(https://www.rudder-project.org/redmine/issues/13573[#13573])
* Fixed: Some old tests are failing on centos
(https://www.rudder-project.org/redmine/issues/13535[#13535])
* Fixed: Tests on variable_string and variable_string_default GM are
failing (https://www.rudder-project.org/redmine/issues/13523[#13523])
* Fixed: Some tests are failing on ubuntu distros
(https://www.rudder-project.org/redmine/issues/13514[#13514])
* Fixed: Some ncf tests are too old and fails on many distributions
(https://www.rudder-project.org/redmine/issues/13249[#13249])
* Fixed: file_check_special tests are failing on debian
(https://www.rudder-project.org/redmine/issues/13243[#13243])

==== Generic methods - Package Management

* Fixed: old packages generic methods are failing on old debian
(https://www.rudder-project.org/redmine/issues/13305[#13305])

==== Documentation

* Fixed: rudder-doc embedeed doesnâ€™t work anymore
(https://www.rudder-project.org/redmine/issues/13659[#13659])
* Fixed: Document Amazon Linux compatibility
(https://www.rudder-project.org/redmine/issues/13624[#13624])
* Fixed: Bad explanation for generic variable override priority cause
people making the opposite of what is needed
(https://www.rudder-project.org/redmine/issues/13615[#13615])

==== Agent

* Fixed: rudder server command states that ``Warning: Long arguments are
not supported, you probably tried to use one!'' - but it does support it
(https://www.rudder-project.org/redmine/issues/13505[#13505])

==== Packaging

* Fixed: Debian package cannot build in 4.1 because of docs.rudder.io
(https://www.rudder-project.org/redmine/issues/13594[#13594])
* Fixed: Use new man page URL after doc URL redirect
(https://www.rudder-project.org/redmine/issues/13537[#13537])
* Fixed: rudder-agent 4.1 install hangs on Debian 7
(https://www.rudder-project.org/redmine/issues/13525[#13525])
* Fixed: Doc download in webapp package does not work anymore
(https://www.rudder-project.org/redmine/issues/13499[#13499])
* Fixed: parallel build on rpmbuild hides build error
(https://www.rudder-project.org/redmine/issues/13300[#13300])
* Fixed: Purge of rudder-webapp should not fail
(https://www.rudder-project.org/redmine/issues/13210[#13210])
* Fixed: Fix bdb download link from repository.rudder.io
(https://www.rudder-project.org/redmine/issues/13198[#13198])
* Fixed: rudder server upgrade-techniques â€“autoupdate-technique-library
fails when run during Rudder upgrade
(https://www.rudder-project.org/redmine/issues/13458[#13458])
* Fixed: cebtos7 install_package_existent should be skipped
(https://www.rudder-project.org/redmine/issues/13596[#13596])
* Fixed: Makefile fails if a symbolink link /usr/bin/ncf already exists
(https://www.rudder-project.org/redmine/issues/13277[#13277])

==== Generic methods - Service Management

* Fixed: Service test do not use any service to test on suse
(https://www.rudder-project.org/redmine/issues/13278[#13278])

==== Security

* Fixed: Bad mime type for our js files: application/js
(https://www.rudder-project.org/redmine/issues/13334[#13334])
* Fixed: file enforce content log file content which can have private
info (https://www.rudder-project.org/redmine/issues/13608[#13608])

==== Performance and scalability

* Fixed: Hikari pool autocomit configuration is incorrect, which can
impact performance
(https://www.rudder-project.org/redmine/issues/13582[#13582])
* Fixed: Policy generation fails definitively when postgresql is shut
down during policy generation
(https://www.rudder-project.org/redmine/issues/13517[#13517])
* Fixed: On error on nodecompliance SQL, logs are huge
(https://www.rudder-project.org/redmine/issues/13427[#13427])

==== Techniques

* Fixed: Package management technique fails to check if a package is
absent in the ``latest'' version
(https://www.rudder-project.org/redmine/issues/12939[#12939])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.14 (2018-08-08)

=== Changes

==== Web - UI & UX

* Remove the ``Update policy'' button
(https://www.rudder-project.org/redmine/issues/12668[#12668])

=== Bug fixes

==== Packaging

* Fixed: echo -n doewnâ€™t work on aix
(https://www.rudder-project.org/redmine/issues/13005[#13005])

==== Architecture - Internal libs

* Fixed: nuProcess 1.2.0 crashes on JDK 10
(https://www.rudder-project.org/redmine/issues/12832[#12832])

==== Web - Config management

* Fixed: ``SocketException(message=`Socket closed''' error at the end of
generation with 500 nodes
(https://www.rudder-project.org/redmine/issues/10646[#10646])

==== Agent

* Fixed: Broken -g option in rudder remote run
(https://www.rudder-project.org/redmine/issues/13017[#13017])

==== Web - UI & UX

* Fixed: Strange behavior of the generation status icon background
(https://www.rudder-project.org/redmine/issues/12816[#12816])
* Fixed: Display Rudder Machine ID color scheme is surprising
(https://www.rudder-project.org/redmine/issues/12923[#12923])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.13 (2018-07-18)

=== Changes

==== Generic methods

* Add the possibility to customize filters and tests for jinja2
templating (https://www.rudder-project.org/redmine/issues/12761[#12761])
* Add the possibility to customize filters and tests for jinja2
templating (https://www.rudder-project.org/redmine/issues/12761[#12761])
* Add support for BSD-style init scripts services (rc.d) (slackware)
(https://www.rudder-project.org/redmine/issues/12593[#12593])

==== Generic methods - Package Management

* Synchronize the `slackpkg' cfengine package module shipped with ncf
with the official one
(https://www.rudder-project.org/redmine/issues/12811[#12811])
* Synchronize package modules from masterfiles
(https://www.rudder-project.org/redmine/issues/10907[#10907])
* Backport options for yum package provider
(https://www.rudder-project.org/redmine/issues/12127[#12127])
* Add a package module for cfengine supporting slackware
(https://www.rudder-project.org/redmine/issues/12684[#12684])

==== Documentation

* Document plugin node-external-reports
(https://www.rudder-project.org/redmine/issues/12864[#12864])
* Add binary dependency to rpkg format documentation
(https://www.rudder-project.org/redmine/issues/12810[#12810])
* Change the documentation to tell the user to use the gpg key from the
root path (https://www.rudder-project.org/redmine/issues/12802[#12802])

==== Agent

* Add a command line option to run the agent in full compliance mode
(https://www.rudder-project.org/redmine/issues/12681[#12681])

==== Packaging

* Accept external options to rpmbuild calls
(https://www.rudder-project.org/redmine/issues/12973[#12973])

==== System techniques

* Make the agent resend the inventory if sending failed
(https://www.rudder-project.org/redmine/issues/7490[#7490])

==== Techniques

* Add testing on sshKeyDistribution
(https://www.rudder-project.org/redmine/issues/12822[#12822])

=== Bug fixes

==== API

* Fixed: Tags in directives are ignored in POST API
(https://www.rudder-project.org/redmine/issues/12355[#12355])
* Fixed: Archive API always tells ``group'' even for other objects
(https://www.rudder-project.org/redmine/issues/12705[#12705])

==== Web - UI & UX

* Fixed: The red cross in case of generation problem is not visible
enough (https://www.rudder-project.org/redmine/issues/11889[#11889])
* Fixed: loading page and 404 page does not use correct style when
redirected by apache
(https://www.rudder-project.org/redmine/issues/12736[#12736])
* Fixed: GUI problem with long strings in reporting
(https://www.rudder-project.org/redmine/issues/12283[#12283])
* Fixed: Buttons donâ€™t follow a straight design (more)
(https://www.rudder-project.org/redmine/issues/12662[#12662])

==== Generic methods

* Fixed: Wrong bundle name passed in 12154
(https://www.rudder-project.org/redmine/issues/12921[#12921])
* Fixed: Create a generic method to define environment variable
(https://www.rudder-project.org/redmine/issues/12154[#12154])

==== Web - Config management

* Fixed: When we add a section in the directive editor, it clears the
content of the previous section
(https://www.rudder-project.org/redmine/issues/12916[#12916])

==== Generic methods - Package Management

* Fixed: Force using epoch when installing a package with zypper
(https://www.rudder-project.org/redmine/issues/12799[#12799])
* Fixed: zypper module arch and version specification for zypper
commands is not correct
(https://www.rudder-project.org/redmine/issues/12798[#12798])

==== Web - Technique editor

* Fixed: Broken technique editor if a technique is in the browser cache,
but has been removed from the FS
(https://www.rudder-project.org/redmine/issues/12970[#12970])

==== Web - Nodes & inventories

* Fixed: In inventory, ``motherboardid'' is not the mother board id but
the machine id
(https://www.rudder-project.org/redmine/issues/12893[#12893])
* Fixed: Itâ€™s difficult to know if the node property added is valid json
(https://www.rudder-project.org/redmine/issues/12360[#12360])
* Fixed: Slackware is not known by Rudder
(https://www.rudder-project.org/redmine/issues/12707[#12707])

==== Documentation

* Fixed: Invalid ordering of elements in node external reports plugin
(https://www.rudder-project.org/redmine/issues/12901[#12901])
* Fixed: Missing support of Ubuntu 18.04 agent in documentation
(https://www.rudder-project.org/redmine/issues/12854[#12854])
* Fixed: Documentation should use full path to rudder-pkg for command
examples (https://www.rudder-project.org/redmine/issues/12771[#12771])

==== Technique editor - API

* Fixed: Technique Editor may ignores some error when authenticating,
leading to unauthorized access
(https://www.rudder-project.org/redmine/issues/12720[#12720])
* Fixed: Technique Editor may ignores some error when authenticating,
leading to unauthorized access
(https://www.rudder-project.org/redmine/issues/12720[#12720])

==== Web - Compliance & node report

* Fixed: During an upgrade of Rudder, if a new generic method appears in
ncf, that is also on local method, all is broken
(https://www.rudder-project.org/redmine/issues/12930[#12930])
* Fixed: Some reports are duplicated between agent and postgres leading
to ``unexpected'' compliance
(https://www.rudder-project.org/redmine/issues/12719[#12719])

==== Packaging

* Fixed: Broken windows plugin install in 4.3
(https://www.rudder-project.org/redmine/issues/12922[#12922])
* Fixed: Rudder-agent provides rudder-agent without a version
(https://www.rudder-project.org/redmine/issues/7777[#7777])
* Fixed: Error in Plugin section for Node external reports
(https://www.rudder-project.org/redmine/issues/12898[#12898])
* Fixed: Warn during inventory if sending through http not https
(https://www.rudder-project.org/redmine/issues/11284[#11284])

==== Generic methods - Service Management

* Fixed: fail to restart certain services on Ubuntu because of
incomplete detection of systemd/upstart
(https://www.rudder-project.org/redmine/issues/12887[#12887])

==== System integration

* Fixed: apache overwrites error response from Rudder
(https://www.rudder-project.org/redmine/issues/12747[#12747])
* Fixed: Generation gets stuck when cf-serverd is not running
(https://www.rudder-project.org/redmine/issues/12604[#12604])

==== Plugins

* Fixed: rudder-pkg must disable plugin during major version Rudder
update (https://www.rudder-project.org/redmine/issues/12331[#12331])
* Fixed: rudder-pkg should fail installation is a dependency is missing
(https://www.rudder-project.org/redmine/issues/12749[#12749])

==== System techniques

* Fixed: System Techniques must not be added by reload technique, only
updated, else they are duplicated
(https://www.rudder-project.org/redmine/issues/12765[#12765])
* Fixed: cron is always restarted since #12615
(https://www.rudder-project.org/redmine/issues/12886[#12886])
* Fixed: When a technique reports several time the exact same text,
there is only one report generated
(https://www.rudder-project.org/redmine/issues/6343[#6343])
* Fixed: Detection of minicurl and https is done in conflicting ways
(https://www.rudder-project.org/redmine/issues/12155[#12155])
* Fixed: Rudder agent needs 2 updates to work properly
(https://www.rudder-project.org/redmine/issues/12793[#12793])

==== Performance and scalability

* Fixed: Method copyResourceFile is quite inefficient
(https://www.rudder-project.org/redmine/issues/12702[#12702])
* Fixed: Unused formatter in policy generation spend a bit of time in
policy generation
(https://www.rudder-project.org/redmine/issues/12735[#12735])
* Fixed: Moving policies to their final position (last step of policies
writing) could be improved
(https://www.rudder-project.org/redmine/issues/12730[#12730])
* Fixed: We are missing a lot of timing measurement in policy generation
(https://www.rudder-project.org/redmine/issues/12725[#12725])

==== Techniques

* Fixed: Technique userManagement does not change shell
(https://www.rudder-project.org/redmine/issues/6395[#6395])
* Fixed: Missing support for ubuntu 18_04 in technique
aptPackageManagerSettings
(https://www.rudder-project.org/redmine/issues/12884[#12884])
* Fixed: Clean up the tests for sshKeyDistribution
(https://www.rudder-project.org/redmine/issues/12863[#12863])
* Fixed: Load modules from local ncf in Rudder policies
(https://www.rudder-project.org/redmine/issues/12774[#12774])
* Fixed: Process management: stopped sends multiple reports.
(https://www.rudder-project.org/redmine/issues/11683[#11683])
* Fixed: SSH Configuration Technique on AIX does not reload correctly
sshd service when thereâ€™s been a change
(https://www.rudder-project.org/redmine/issues/12745[#12745])
* Fixed: Misleading error message in Services technique when range of
number of process could not be repaired
(https://www.rudder-project.org/redmine/issues/12713[#12713])
* Fixed: Add zypper_pattern provider in package technique
(https://www.rudder-project.org/redmine/issues/12700[#12700])
* Fixed: Typo in generic method File content
(https://www.rudder-project.org/redmine/issues/12507[#12507])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Ilan COSTA
* Janos Mattyasovszky
* Dmitry Svyatogorov
* Florian Heigl

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.12 (2018-05-29)

=== Changes

==== Packaging

* Add agent support for Ubuntu 18.04 LTS ``Bionic Beaver''
(https://www.rudder-project.org/redmine/issues/12683[#12683])
*  Use pylint to verify python code in ncf
(https://issues.rudder.io/issues/12639[#12639])

==== Miscellaneous

* Add tests for sshKeyDistribution technique
(https://www.rudder-project.org/redmine/issues/12455[#12455])

==== Web - Compliance & node report

* Overridden directives are not listed in reports information
(https://www.rudder-project.org/redmine/issues/7616[#7616])

==== Agent

* Upgrade to CFEngine 3.10.4 LTS
(https://www.rudder-project.org/redmine/issues/12576[#12576])

==== System techniques

* Add a way to override report mode in system techniques
(https://www.rudder-project.org/redmine/issues/12680[#12680])
* rudder-lib.st in the ``common'' system technique does not identify
crond as running when the ps is /usr/sbin/crond -l notice
(https://www.rudder-project.org/redmine/issues/12615[#12615])

==== Performance and scalability

* Explore alternative format for compliance table
(https://www.rudder-project.org/redmine/issues/12621[#12621])

==== Techniques

* Add an entry for the slackware package module in the packageManagement
technique metadata
(https://www.rudder-project.org/redmine/issues/12687[#12687])
* Make the `common' system technique identify crond on a slackware agent
(https://www.rudder-project.org/redmine/issues/12610[#12610])
* New rudder technique : SNMP configuration to monitor the rudder agent
health (https://www.rudder-project.org/redmine/issues/12501[#12501])

=== Bug fixes

==== Web - UI & UX

* Fixed: Compliance bar appears partially white in some graphes
(https://www.rudder-project.org/redmine/issues/12643[#12643])
* Fixed: Directive tree filter is very slow
(https://www.rudder-project.org/redmine/issues/12650[#12650])
* Fixed: Delete directive confirmation popup should display the action
to confirm (https://www.rudder-project.org/redmine/issues/12552[#12552])
* Fixed: Add space between filter and Event logs table
(https://www.rudder-project.org/redmine/issues/12515[#12515])
* Fixed: CSS of txt/json inputs is broken
(https://www.rudder-project.org/redmine/issues/12514[#12514])
* Fixed: Add margin between selects and button groups in Archives page
(https://www.rudder-project.org/redmine/issues/12513[#12513])
* Fixed: Buttons donâ€™t follow a straight design
(https://www.rudder-project.org/redmine/issues/12512[#12512])

==== Technique editor - UI/UX

* Fixed: Broken css when technique name is long
(https://www.rudder-project.org/redmine/issues/12545[#12545])
* Fixed: The filter field in the technique editor should not be
monospace (https://www.rudder-project.org/redmine/issues/12081[#12081])

==== Web - Config management

* Fixed: ``Safelly'' typo in logs
(https://www.rudder-project.org/redmine/issues/12635[#12635])

==== Web - Maintenance

* Fixed: Java 9 / Java 10 compatibility: security exception for JS VM
(https://www.rudder-project.org/redmine/issues/12548[#12548])
* Fixed: Java 9 / Java 10 compatibility: javax/xml/bind removed
(https://www.rudder-project.org/redmine/issues/12557[#12557])

==== Web - Technique editor

* Fixed: Always get ``Technique diverges'' pop-up when coming back to
technique editor
(https://www.rudder-project.org/redmine/issues/12207[#12207])

==== Architecture - Internal libs

* Fixed: Missing ipv6 constraint regex test
(https://www.rudder-project.org/redmine/issues/12666[#12666])

==== Documentation

* Fixed: Restricted java security policy breaks Rudder (class configured
for Cipher(provider: BC)cannot be found)
(https://www.rudder-project.org/redmine/issues/12606[#12606])
* Fixed: Typo being -> being in rudder manual
(https://www.rudder-project.org/redmine/issues/12506[#12506])
* Fixed: Fix various typos in ncf doc
(https://www.rudder-project.org/redmine/issues/12570[#12570])

==== Miscellaneous

* Fixed: wrong import in ssh-key-distribution tests
(https://www.rudder-project.org/redmine/issues/12511[#12511])

==== Web - Compliance & node report

* Fixed: $\{const.dollar} in generic method parameter leads to missing
report (https://www.rudder-project.org/redmine/issues/12616[#12616])

==== Packaging

* Fixed: .pyc file are not cleaned up during postinst
(https://www.rudder-project.org/redmine/issues/12634[#12634])
* Fixed: Fix flask version during build
(https://www.rudder-project.org/redmine/issues/12541[#12541])
* Fixed: rudder-pkg python3 issue
(https://www.rudder-project.org/redmine/issues/12504[#12504])
* Fixed: ncf script traceback error
(https://www.rudder-project.org/redmine/issues/12633[#12633])

==== API

* Fixed: NumberFormatException in NodeAPI 8 (runResponse)
(https://www.rudder-project.org/redmine/issues/12556[#12556])

==== Agent

* Fixed: jobScheduler does not work when the first non-loopback
interface has no ip address
(https://www.rudder-project.org/redmine/issues/12262[#12262])

==== System techniques

* Fixed: Access rules on Rudder servers/relays prevent in most case the
server from downloading/connecting on itself
(https://www.rudder-project.org/redmine/issues/12521[#12521])

==== Performance and scalability

* Fixed: Rule tree filter is a bit slow
(https://www.rudder-project.org/redmine/issues/12690[#12690])

==== Techniques

* Fixed: Enforce checkbox tooltip in groupmanagement technique is
misleading (https://www.rudder-project.org/redmine/issues/12670[#12670])
* Fixed: Missing report if two mountounts with the same target
(https://www.rudder-project.org/redmine/issues/12647[#12647])
* Fixed: Missing report when we cannot change home directory in users
technique (https://www.rudder-project.org/redmine/issues/12555[#12555])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Janos Mattyasovszky

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.11 (2018-04-19)

=== Changes

==== Packaging

* Oracle jdk url has changed but not in ppa
(https://www.rudder-project.org/redmine/issues/12479[#12479])

==== Relay server or API

* Make Groups and Rules API accessible for internal use
(https://www.rudder-project.org/redmine/issues/12419[#12419])

==== Miscellaneous

* Update the techniques tests
(https://www.rudder-project.org/redmine/issues/12346[#12346])

=== Bug fixes

==== Generic methods

* Fixed: Job cheduler methods with mode are broken
(https://www.rudder-project.org/redmine/issues/12378[#12378])
* Fixed: Missing report for ``Shared file to node''
(https://www.rudder-project.org/redmine/issues/12377[#12377])

==== Web - Config management

* Fixed: Cannot generate policies when there is a loop in policy server
hierharchy (stackoverflow)
(https://www.rudder-project.org/redmine/issues/12359[#12359])
* Fixed: Typo in agent build error ``resource''"
(https://www.rudder-project.org/redmine/issues/12314[#12314])

==== Technique editor - Techniques

* Fixed: Technique editor returning an error when saving
(https://www.rudder-project.org/redmine/issues/12464[#12464])

==== Plugin - API ACL

* Fixed: API failing on root node
(https://www.rudder-project.org/redmine/issues/12229[#12229])

==== Generic methods - File Management

* Fixed: Jinja2 templating: Shows error in output even when successful
(https://www.rudder-project.org/redmine/issues/12379[#12379])
* Fixed: We cannot use file_enforce_content with a list and enforce=true
(https://www.rudder-project.org/redmine/issues/12147[#12147])

==== Documentation

* Fixed: Remove references to foswiki in the doc
(https://www.rudder-project.org/redmine/issues/12363[#12363])
* Fixed: Missing configuration instructions at the end of node install
documentation
(https://www.rudder-project.org/redmine/issues/11927[#11927])
* Fixed: Remove doc of class_prefix variable
(https://www.rudder-project.org/redmine/issues/12176[#12176])
* Fixed: condition_from_expression documentation does not clearly state
how to use it
(https://www.rudder-project.org/redmine/issues/12157[#12157])

==== Miscellaneous

* Fixed: broken reporting for ssh key distribution technique
(https://www.rudder-project.org/redmine/issues/12444[#12444])
* Fixed: wrong xenstore-read path on (at least) ubuntu
(https://www.rudder-project.org/redmine/issues/12376[#12376])
* Fixed: Wrong regex in FileTemplate technique
(https://www.rudder-project.org/redmine/issues/12263[#12263])

==== Agent

* Fixed: if we have syntax error in policies on the Rudder server,
rudder agent check says that all is fine
(https://www.rudder-project.org/redmine/issues/12220[#12220])
* Fixed: agent-health should not require reverse resolution
(https://www.rudder-project.org/redmine/issues/12218[#12218])

==== Packaging

* Fixed: rudder-jetty should depend on headless jre on centos7
(https://www.rudder-project.org/redmine/issues/12328[#12328])
* Fixed: Remove invalid comment in rudder-agent spec file
(https://www.rudder-project.org/redmine/issues/12312[#12312])
* Fixed: rudder-init fails when rudder-server-roles.conf does not exist
(https://www.rudder-project.org/redmine/issues/12247[#12247])

==== Web - Nodes & inventories

* Fixed: LDAP query checker must succeed when criteria is empty
(https://www.rudder-project.org/redmine/issues/12343[#12343])

==== Plugins

* Fixed: rudder-pkg does not allow to install/update/remove several
plugin at once
(https://www.rudder-project.org/redmine/issues/12330[#12330])

==== Security

* Fixed: Failed generation with ``Could not initialize class
javax.crypto.JceSecurity''
(https://www.rudder-project.org/redmine/issues/12448[#12448])
* Fixed: Bad session counting block user login after three session
created (https://www.rudder-project.org/redmine/issues/12367[#12367])

==== Server components

* Fixed: Agent components should not try to load failsafe.cf when
policies are broken
(https://www.rudder-project.org/redmine/issues/12243[#12243])
* Fixed: sysconfig/apache2 modifications get removed
(https://www.rudder-project.org/redmine/issues/11153[#11153])

==== Techniques

* Fixed: Time settings directive configuration not accessible to
non-root users
(https://www.rudder-project.org/redmine/issues/12303[#12303])
* Fixed: Unsupported key types are silently ignored in ssh key
management technique
(https://www.rudder-project.org/redmine/issues/8618[#8618])
* Fixed: Missing report for component ``Post-modification hook'' when
cleaning files
(https://www.rudder-project.org/redmine/issues/12297[#12297])
* Fixed: Missing report in Group Management
(https://www.rudder-project.org/redmine/issues/12214[#12214])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Ilan COSTA
* Janos Mattyasovszky
* Florian Heigl
* Rob Pomeroy

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.10 (2018-02-23)

=== Breaking Changes

* Fixed: Incorrect detection and storage of architecture 32/64 bits
(https://www.rudder-project.org/redmine/issues/11918[#11918])

=== Changes

==== Technique editor - UI/UX

* Change max field length from 2k to 16k
(https://www.rudder-project.org/redmine/issues/11859[#11859])

==== Web - UI & UX

* add margin to the magnifying glass icon in the Nodes table
(https://www.rudder-project.org/redmine/issues/11849[#11849])

==== Generic methods

* file_copy_with_check
(https://www.rudder-project.org/redmine/issues/11610[#11610])
* Add a method to unset all the classes of a prefix
(https://www.rudder-project.org/redmine/issues/11903[#11903])
* Implement a push / pop mechanism for audit mode
(https://www.rudder-project.org/redmine/issues/11732[#11732])

==== Web - Nodes & inventories

* Add more information about the inventory in the inventory process
reporting (https://www.rudder-project.org/redmine/issues/10084[#10084])

==== Documentation

* Remove bibliography from the doc
(https://www.rudder-project.org/redmine/issues/7733[#7733])
* Document scheduler generic method
(https://www.rudder-project.org/redmine/issues/6946[#6946])

==== Technique editor - API

* Use a fixed size font in the technique editor parameters
(https://www.rudder-project.org/redmine/issues/11895[#11895])

==== Agent

* Backport complete variable table performance patch
(https://www.rudder-project.org/redmine/issues/12130[#12130])
* Update CFEngine to 3.10.3
(https://www.rudder-project.org/redmine/issues/12090[#12090])
* Add a ``rudder agent history'' command
(https://www.rudder-project.org/redmine/issues/12053[#12053])

==== Packaging

* Upgrade openssl to 1.0.2n
(https://www.rudder-project.org/redmine/issues/11967[#11967])
* Create a rudder server upgrade-techniques commands
(https://www.rudder-project.org/redmine/issues/11059[#11059])

==== Initial promises & sys tech

* Implement disable-flag for policy server policy copy for nodes
(https://www.rudder-project.org/redmine/issues/11631[#11631])
* Create a global variable for ``shared-files'' path
(https://www.rudder-project.org/redmine/issues/6324[#6324])

==== Architecture - Refactoring

* Remove ListTag workaround when JGit version > 1.2
(https://www.rudder-project.org/redmine/issues/2278[#2278])

==== Techniques

* Add post-hook to the manage key-value file techniques
(https://www.rudder-project.org/redmine/issues/12124[#12124])

=== Bug fixes

==== Web - UI & UX

* Fixed: Update / Delete buttons on group Category modification should
be separated
(https://www.rudder-project.org/redmine/issues/11782[#11782])
* Fixed: Javascript error on every pages, preventing usage of file
explorer (https://www.rudder-project.org/redmine/issues/11991[#11991])
* Fixed: Directives tree is not filtered after saving changes
(https://www.rudder-project.org/redmine/issues/11670[#11670])
* Fixed: Input text for repository in apt repository management is too
small (https://www.rudder-project.org/redmine/issues/11841[#11841])
* Fixed: ``Agent policy mode'' should be ``Node policy mode''
(https://www.rudder-project.org/redmine/issues/11837[#11837])

==== Generic methods

* Fixed: command_execution_result does not report anything
(https://www.rudder-project.org/redmine/issues/12087[#12087])
* Fixed: yum is run at each cf-promises, having a massive perf cost, on
redhat-like system
(https://www.rudder-project.org/redmine/issues/11937[#11937])
* Fixed: Add a comment about quotes in file_ensure_key_value parameters
documentation
(https://www.rudder-project.org/redmine/issues/11896[#11896])
* Fixed: Wrong result class in file_enforce_content
(https://www.rudder-project.org/redmine/issues/11880[#11880])
* Fixed: Abort bundle does not work in dry-run mode
(https://www.rudder-project.org/redmine/issues/11867[#11867])
* Fixed: ``Shared file to node'' method does not send file to node if
file to send was created during run
(https://www.rudder-project.org/redmine/issues/11869[#11869])

==== Web - Nodes & inventories

* Fixed: No Machine Inventory in nodes list while the details are
complete (https://www.rudder-project.org/redmine/issues/12041[#12041])
* Fixed: When a network interface is deleted from a node, it is not
removed on the Rudder server
(https://www.rudder-project.org/redmine/issues/12026[#12026])

==== Technique editor - Techniques

* Fixed: rudder_reporting file is invalid on nodes if it contains `&&'
in one of its parameter
(https://www.rudder-project.org/redmine/issues/11870[#11870])

==== Generic methods - Package Management

* Fixed: Zypper hangs on dialogs / issues due to open tty
(https://www.rudder-project.org/redmine/issues/6291[#6291])

==== Web - Technique editor

* Fixed: Broken variable expression when using node properties in the
technique editor
(https://www.rudder-project.org/redmine/issues/10304[#10304])

==== Documentation

* Fixed: Please, legitimate ``Priority'' usage in multi-instance
directives (https://www.rudder-project.org/redmine/issues/11963[#11963])
* Fixed: Missing documentation about InputTCPMaxSessions and when to
change its value in rsyslog
(https://www.rudder-project.org/redmine/issues/8613[#8613])
* Fixed: Merge ``Migration'' and ``Server migration'' subsections in the
doc (https://www.rudder-project.org/redmine/issues/11062[#11062])
* Fixed: Restore backup documentation is not correct
(https://www.rudder-project.org/redmine/issues/11177[#11177])
* Fixed: Redirect FAQ to faq.rudder-project.org
(https://www.rudder-project.org/redmine/issues/11905[#11905])

==== Technique editor - API

* Fixed: Result class containing \{} are not properly canonized
(https://www.rudder-project.org/redmine/issues/11600[#11600])

==== Agent

* Fixed: Autocompletion for rudder commands doesnâ€™t work on RHEL and
SLES (https://www.rudder-project.org/redmine/issues/11885[#11885])
* Fixed: The agent moves obstructions regardless of policy mode
(https://www.rudder-project.org/redmine/issues/11866[#11866])
* Fixed: Agent script argument parsing failure when using non-default
locale (https://www.rudder-project.org/redmine/issues/12131[#12131])
* Fixed: rudder remote run cuts down IP of remote host
(https://www.rudder-project.org/redmine/issues/11418[#11418])
* Fixed: With ``rudder agent run'', nothing is logged in
/var/rudder/cfengine-community/outputs/
(https://www.rudder-project.org/redmine/issues/10801[#10801])
* Fixed: When rudder agent disable fails it prints a success message
(https://www.rudder-project.org/redmine/issues/11936[#11936])
* Fixed: Agent process detection is wrong in rudder agent check on AIX
(https://www.rudder-project.org/redmine/issues/11921[#11921])

==== Packaging

* Fixed: rudder-webapp upgrade doesnâ€™t commit updates to ncf hooks
(https://www.rudder-project.org/redmine/issues/6758[#6758])
* Fixed: rudder-inventory-ldap package provides openldap libraries
(https://www.rudder-project.org/redmine/issues/3377[#3377])
* Fixed: typo in rudder-server relay package install output
(https://www.rudder-project.org/redmine/issues/12064[#12064])
* Fixed: Upgrade Java version used when building webapp on old debian
versions, since oracle jvm links has changed
(https://www.rudder-project.org/redmine/issues/11981[#11981])
* Fixed: Rudder root on SLES12 shows LDAP error during installation
(https://www.rudder-project.org/redmine/issues/10454[#10454])

==== Initial promises & sys tech

* Fixed: If we a have generic method command_execution with parameter
/bin/true, we get an error on reporting for syslog restart on non-aix
nor solaris system
(https://www.rudder-project.org/redmine/issues/12139[#12139])
* Fixed: Rudder server installation fails if apache cannot resolve
server hostname
(https://www.rudder-project.org/redmine/issues/11983[#11983])
* Fixed: Use rudder agent check in aix crontab
(https://www.rudder-project.org/redmine/issues/11920[#11920])
* Fixed: Inventory from a node on Xen dom0 is missing UUID and is
invalid (https://www.rudder-project.org/redmine/issues/11902[#11902])
* Fixed: remote execution is cut at 30 secondes
(https://www.rudder-project.org/redmine/issues/11416[#11416])

==== API

* Fixed: Api does not fail on bad JSON
(https://www.rudder-project.org/redmine/issues/5931[#5931])

==== Web - Compliance & node report

* Fixed: Compliance keeps on loading while expected reports are not
available for a node or a rule
(https://www.rudder-project.org/redmine/issues/7281[#7281])
* Fixed: Runaway quotation mark at Node report
(https://www.rudder-project.org/redmine/issues/11834[#11834])

==== Architecture - Dependencies

* Fixed: ERROR: canceling statement due to user request
(https://www.rudder-project.org/redmine/issues/11973[#11973])
* Fixed: Update to monix 2.3.3: critical bug corrected
(https://www.rudder-project.org/redmine/issues/12024[#12024])

==== Techniques

* Fixed: Typo in templating technique
(https://www.rudder-project.org/redmine/issues/12126[#12126])
* Fixed: Typo in tooltip of File content (from remote template) for path
of file (https://www.rudder-project.org/redmine/issues/12123[#12123])
* Fixed: The technique file copy from shared folder reports file source
instead of file destination
(https://www.rudder-project.org/redmine/issues/6564[#6564])
* Fixed: Group management technique silently changes the group gid
(https://www.rudder-project.org/redmine/issues/11863[#11863])
* Fixed: sharedfile_to_node reports repaired even if it fails
(https://www.rudder-project.org/redmine/issues/11836[#11836])

==== Server components

* Fixed: There is a /var/cfengine/inputs on a Rudder server
(https://www.rudder-project.org/redmine/issues/8625[#8625])
* Fixed: Clarify support for SLES12 SP2 as Root Server
(https://www.rudder-project.org/redmine/issues/11854[#11854])
* Fixed: rudder server refusing nodes after an error in
check-rudder-agent
(https://www.rudder-project.org/redmine/issues/11309[#11309])

==== System integration

* Fixed: Stopping slapd fails if pid file is empty
(https://www.rudder-project.org/redmine/issues/10498[#10498])
* Fixed: service rudder-* outputs on stderror
(https://www.rudder-project.org/redmine/issues/6429[#6429])
* Fixed: Cannot run rudder server reload-techniques on RedHat 6.6
(https://www.rudder-project.org/redmine/issues/11907[#11907])
* Fixed: Configuration file of Rudder mention that we may change ``LDAP
DIT configuration'', which is wrong
(https://www.rudder-project.org/redmine/issues/10664[#10664])
* Fixed: send-clean.sh blocks on inventory parsing error
(https://www.rudder-project.org/redmine/issues/10019[#10019])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Michael Gliwinski
* Dennis Cabooter
* Avit Sidis
* Dmitry Svyatogorov
* Janos Mattyasovszky
* The Ranger
* Jean Cardona
* Alexandre BRIANCEAU
* Alexander Brunhirl
* Florian Heigl

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.9 (2017-12-12)

=== Changes

==== Packaging

* Upgrade openssl to 1.0.2m
(https://www.rudder-project.org/redmine/issues/11734[#11734])
* Change rudder-techniques ncf dependency to a correct version
(https://www.rudder-project.org/redmine/issues/11692[#11692])

==== Web - UI & UX

* Change how Directive priority is displayed
(https://www.rudder-project.org/redmine/issues/11725[#11725])
* On Nodes table, put the link to node details on nodeâ€™s name instead of
on magnifying glass icon
(https://www.rudder-project.org/redmine/issues/11643[#11643])

==== Architecture - Refactoring

* Clean-up unused imports in rudder
(https://www.rudder-project.org/redmine/issues/11685[#11685])
* Make allocated memory for build configurable
(https://www.rudder-project.org/redmine/issues/11688[#11688])

==== Architecture - Dependencies

* sealerate should be scoped ``provided''
(https://www.rudder-project.org/redmine/issues/11781[#11781])

==== Agent

* Create a command to display system classes
(https://www.rudder-project.org/redmine/issues/11049[#11049])

=== Bug fixes

==== Web - UI & UX

* Fixed: Remove limit to have at least 3 characters in all entities
names (Rules/Directives/categories â€¦)
(https://www.rudder-project.org/redmine/issues/11801[#11801])
* Fixed: CentOS is written ``Centos'' in the OS graph on the dashboard
(https://www.rudder-project.org/redmine/issues/11652[#11652])
* Fixed: Some icons in the interface look pixelized on hidpi screens
(https://www.rudder-project.org/redmine/issues/11237[#11237])
* Fixed: Fix some CSS issues in Ruleâ€™s compliance tables
(https://www.rudder-project.org/redmine/issues/11679[#11679])

==== Web - Config management

* Fixed: Missing node id in log message on generaction error
(https://www.rudder-project.org/redmine/issues/11819[#11819])

==== Web - Nodes & inventories

* Fixed: Node (hostname,policyserver,â€¦) modification should trigger
promises regeneration
(https://www.rudder-project.org/redmine/issues/1411[#1411])
* Fixed: Impossible to search or build groups based on JSON values in
node properties
(https://www.rudder-project.org/redmine/issues/10599[#10599])

==== Documentation

* Fixed: Missing doc on syslog daemon
(https://www.rudder-project.org/redmine/issues/11768[#11768])
* Fixed: Archive REST section outdated for download ZIP archive
(https://www.rudder-project.org/redmine/issues/11650[#11650])
* Fixed: Document how to merge properties, and not simply merge them
(https://www.rudder-project.org/redmine/issues/11730[#11730])
* Fixed: fetch git branch before checkout when building rudder-doc
(https://www.rudder-project.org/redmine/issues/11697[#11697])
* Fixed: Use new ncf branches in rudder-doc
(https://www.rudder-project.org/redmine/issues/11693[#11693])
* Fixed: ``Quick installation'' section on the Rudder doc
(https://www.rudder-project.org/redmine/issues/11668[#11668])

==== Agent

* Fixed: cf-* coredumps if policy_server.dat contains empty lines
(https://www.rudder-project.org/redmine/issues/11724[#11724])
* Fixed: Agent segfaults when merging non-container data variables
(https://www.rudder-project.org/redmine/issues/11620[#11620])
* Fixed: On update error, the help message is not valid anymore
(https://www.rudder-project.org/redmine/issues/11803[#11803])
* Fixed: force option in rudder agent factory-reset does not work
(https://www.rudder-project.org/redmine/issues/11769[#11769])
* Fixed: Impossible to run in house CFEngine and Rudder agent side by
side (https://www.rudder-project.org/redmine/issues/11719[#11719])

==== Packaging

* Fixed: Rudder installation fails on SLES12
(https://www.rudder-project.org/redmine/issues/11727[#11727])

==== Initial promises & sys tech

* Fixed: Unexpected report for Send inventories to CMDB after #11257
(https://www.rudder-project.org/redmine/issues/11648[#11648])
* Fixed: rudder service and thus cf-execd is never restarted / ensure
running (https://www.rudder-project.org/redmine/issues/11303[#11303])

==== System integration

* Fixed: rudder-init fails to report memory errors from jetty start
(https://www.rudder-project.org/redmine/issues/8165[#8165])
* Fixed: When we have a /var full, Rudder LDAP or Postgres can be
corrupted (https://www.rudder-project.org/redmine/issues/11125[#11125])
* Fixed: Fusioninventory task Deploy is missing a dependency to
File-Copy-Recursive
(https://www.rudder-project.org/redmine/issues/11701[#11701])
* Fixed: rudder-pkg should not preserve owner when extracting plugin
(https://www.rudder-project.org/redmine/issues/11423[#11423])
* Fixed: Duration of logrotate for /var/log/rudder/ is too long making
/var/log too big
(https://www.rudder-project.org/redmine/issues/10912[#10912])
* Fixed: Allowed network 0.0.0.0/0 is not currently supported by Apache
(https://www.rudder-project.org/redmine/issues/11226[#11226])

==== Policies

* Fixed: Generic method file_ensure_key_value_present_in_ini_section.cf
has leaky classes, resulting in invalid results
(https://www.rudder-project.org/redmine/issues/11792[#11792])
* Fixed: Boken 4.1 ncf with 3.1 agents
(https://www.rudder-project.org/redmine/issues/11779[#11779])
* Fixed: file_from_string_mustache inserts only $\{content}
(https://www.rudder-project.org/redmine/issues/11744[#11744])
* Fixed: eval usage is not compatible with CFEngine < 3.9
(https://www.rudder-project.org/redmine/issues/11729[#11729])

==== Architecture - Dependencies

* Fixed: Lift-webkit has a dependency toward rhino (which conflicts with
JS param eval)
(https://www.rudder-project.org/redmine/issues/11777[#11777])
* Fixed: Update minor version of java dependency library
(https://www.rudder-project.org/redmine/issues/11764[#11764])

==== Web - Maintenance

* Fixed: Null pointer exception when restoring group archive.
(https://www.rudder-project.org/redmine/issues/11805[#11805])

==== Architecture - Refactoring

* Fixed: Thereâ€™s an ``UTF-8''s in place of ``UTF-8'' in a method
parameter (https://www.rudder-project.org/redmine/issues/11785[#11785])
* Fixed: Remove an ``unchecked because eliminated by erasure''
(https://www.rudder-project.org/redmine/issues/11784[#11784])

==== Techniques

* Fixed: The time synchronization technique doesnâ€™t work on AIX
(https://www.rudder-project.org/redmine/issues/6964[#6964])
* Fixed: Time Management Settings cannot set the timezone to UTC
(https://www.rudder-project.org/redmine/issues/6998[#6998])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Janos Mattyasovszky

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.8 (2017-10-26)

=== Changes

==== Initial promises & sys tech

* Do not send inventory if a forwarder/uploader daemon exists
(https://www.rudder-project.org/redmine/issues/11257[#11257])

==== Documentation

* Document debian 9 support for 4.1
(https://www.rudder-project.org/redmine/issues/11382[#11382])
* Better explain configuration drift reporting
(https://www.rudder-project.org/redmine/issues/11338[#11338])

==== Miscellaneous

* Refactor policy generation tests
(https://www.rudder-project.org/redmine/issues/11397[#11397])

==== Agent

* Node properties local override
(https://www.rudder-project.org/redmine/issues/11618[#11618])
* Add a rudder agent diff command
(https://www.rudder-project.org/redmine/issues/11099[#11099])

==== Techniques

* UserManagement technique does not allow to change the gid of an
existing user
(https://www.rudder-project.org/redmine/issues/11596[#11596])
* Add a new syntax for rudder parameters
(https://www.rudder-project.org/redmine/issues/11405[#11405])

=== Bug fixes

==== Web - UI & UX

* Fixed: Screen estate in compliance graph
(https://www.rudder-project.org/redmine/issues/10761[#10761])
* Fixed: Global parameters UI now showing Edit/Delete button on long
lines (https://www.rudder-project.org/redmine/issues/11585[#11585])
* Fixed: Update Directive popup is broken on firefox 38.6.1esr
(https://www.rudder-project.org/redmine/issues/11584[#11584])
* Fixed: Cannot select version of directive to create if technique
description contains curly braces
(https://www.rudder-project.org/redmine/issues/11393[#11393])

==== Web - Nodes & inventories

* Fixed: Groups are not reloaded after restoring from archive
(https://www.rudder-project.org/redmine/issues/11244[#11244])

==== Web - Config management

* Fixed: Parameter name requires at least 3 characters
(https://www.rudder-project.org/redmine/issues/11588[#11588])
* Fixed: There is no way to remove a Directive based on a Technique that
no longer exists
(https://www.rudder-project.org/redmine/issues/5203[#5203])

==== Documentation

* Fixed: Manually restoring permissions for NCF after archive import is
broken (https://www.rudder-project.org/redmine/issues/11414[#11414])
* Fixed: Dead link in doc
(https://www.rudder-project.org/redmine/issues/11579[#11579])
* Fixed: Missing documentation on Directive ordering
(https://www.rudder-project.org/redmine/issues/11289[#11289])
* Fixed: Wrong formatting in doc to build agent
(https://www.rudder-project.org/redmine/issues/11274[#11274])

==== Agent

* Fixed: Xen domU detection issues with pvops kernels.
(https://www.rudder-project.org/redmine/issues/10787[#10787])
* Fixed: Inventory uploaded multiple times after reinit
(https://www.rudder-project.org/redmine/issues/11580[#11580])

==== Packaging

* Fixed: Error at installation of Rudder 4.1 on centos 6
(https://www.rudder-project.org/redmine/issues/11628[#11628])
* Fixed: Build on Deb7 and ubuntu14.04 fails because jdk8u144 is
unavalaible
(https://www.rudder-project.org/redmine/issues/11626[#11626])
* Fixed: We should not try to edit /etc/cron.d/rudder-agent on AIX
(https://www.rudder-project.org/redmine/issues/11595[#11595])
* Fixed: Warning about zip dependency is at top of installation of
plugin (https://www.rudder-project.org/redmine/issues/11398[#11398])
* Fixed: Plugin postint are not run after a rudder upgrade
(https://www.rudder-project.org/redmine/issues/11430[#11430])
* Fixed: rudder-techniques requires a recent ncf version
(https://www.rudder-project.org/redmine/issues/11411[#11411])
* Fixed: Cannot save plugin status during initial install
(https://www.rudder-project.org/redmine/issues/11395[#11395])
* Fixed: When ugrading Rudder, the Windows plugins is not enabled
anymore (https://www.rudder-project.org/redmine/issues/11385[#11385])
* Fixed: PORT in /etc/default/rudder-slapd is ignored
(https://www.rudder-project.org/redmine/issues/11331[#11331])

==== Initial promises & sys tech

* Fixed: Tidy expected reports does have a too big TTL
(https://www.rudder-project.org/redmine/issues/11591[#11591])
* Fixed: Error message on classical windows agent when getting
environment variable
(https://www.rudder-project.org/redmine/issues/11435[#11435])

==== API

* Fixed: Archives API list returns date with wrong format
(https://www.rudder-project.org/redmine/issues/11408[#11408])

==== Techniques

* Fixed: Allow variable as directive parameters in regexp validated
inputs (https://www.rudder-project.org/redmine/issues/11449[#11449])
* Fixed: generic_variable_definition inserts spaces in multi lined
values (https://www.rudder-project.org/redmine/issues/11613[#11613])
* Fixed: group management technique doesnâ€™t ensure optional user is in
group (https://www.rudder-project.org/redmine/issues/8739[#8739])
* Fixed: Incomplete description of the behaviour of technique
copyGitFile, that may result in broken permissions of whole folder
(https://www.rudder-project.org/redmine/issues/11422[#11422])
* Fixed: File content (key/value format) technique allows white space
before separator but not after it
(https://www.rudder-project.org/redmine/issues/11087[#11087])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Janos Mattyasovszky
* Florian Heigl
* Hamlyn Mootoo

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.7 (2017-09-07)

=== Changes

==== Packaging

* Add Debian 9 support (CI/internal changes and
https://www.rudder-project.org/redmine/issues/11262[#11262])

==== Web - UI & UX

* Fold automatically Group categories if there are too many of them
(https://www.rudder-project.org/redmine/issues/11323[#11323])

==== Miscellaneous

* New technique to centralize creation Variable
(https://www.rudder-project.org/redmine/issues/11148[#11148])
* New technique to read variables from a JSON file
(https://www.rudder-project.org/redmine/issues/11149[#11149])

==== Agent

* Upgrade openssl to 1.0.2l
(https://www.rudder-project.org/redmine/issues/11279[#11279])

=== Bug fixes

==== Web - UI & UX

* Fixed: Node key display differences
(https://www.rudder-project.org/redmine/issues/10852[#10852])
* Fixed: The description of the group tree mentions drag and drop which
does not work
(https://www.rudder-project.org/redmine/issues/11287[#11287])

==== Web - Nodes & inventories

* Fixed: Inventory endpoint info api is reporting saturated off by one
(https://www.rudder-project.org/redmine/issues/11330[#11330])

==== Documentation

* Fixed: Missing doc about latest hooks in the manual
(https://www.rudder-project.org/redmine/issues/11305[#11305])

==== Miscellaneous

* Fixed: ``compliance'' user role is broken
(https://www.rudder-project.org/redmine/issues/11185[#11185])

==== Web - Compliance & node report

* Fixed: Missing agent reports after Rudder server restart
(https://www.rudder-project.org/redmine/issues/11037[#11037])
* Fixed: ``no report'' explanation is not correct in node details
(https://www.rudder-project.org/redmine/issues/11270[#11270])

==== Packaging

* Fixed: Pre/post upgrade scripts do not correctly save and restore
plugins status with rudder-plugin
(https://www.rudder-project.org/redmine/issues/11278[#11278])
* Fixed: Remove rudder.8.gz from rudder-packages preventing build of man
pages (https://www.rudder-project.org/redmine/issues/11258[#11258])
* Fixed: Configuration of database password fails after install
(https://www.rudder-project.org/redmine/issues/11253[#11253])

==== Initial promises & sys tech

* Fixed: When running ``rudder agent inventory'', all other reports are
missing on the server
(https://www.rudder-project.org/redmine/issues/11285[#11285])

==== Agent

* Fixed: Upgrade agent to CFEngine 3.10.2
(https://www.rudder-project.org/redmine/issues/11288[#11288])
* Fixed: Do not display components summary in non-full-compliance modes
(https://www.rudder-project.org/redmine/issues/11324[#11324])
* Fixed: `rudder agent info' should report compliance mode
(full-compliance / changes-only / reports-disabled)
(https://www.rudder-project.org/redmine/issues/10649[#10649])
* Fixed: When in changes only mode, with no heartbeat, `rudder agent
run' outputs `error: Rudder agent was interrupted during execution by a
fatal error.'
(https://www.rudder-project.org/redmine/issues/9807[#9807])

==== Web - Maintenance

* Fixed: Node compliances table is never archived
(https://www.rudder-project.org/redmine/issues/11314[#11314])

==== Techniques

* Fixed: Technique ``Package sources and settings (APT)'' does not
support stretch
(https://www.rudder-project.org/redmine/issues/11336[#11336])
* Fixed: sudo management isnâ€™t update-safe
(https://www.rudder-project.org/redmine/issues/9347[#9347])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Ilan Costa
* Florian Heigl
* Janos Mattyasovszky
* Dmitry Svyatogorov

This is a bug fix release in the 4.1 ESR series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.6 (2017-08-14)

=== Changes

==== Architecture - Internal libs

* Upgrade to Scala 2.12.3 to improve compilation time
(https://www.rudder-project.org/redmine/issues/11192[#11192])

==== Documentation

* Update screenshot for interface usage page
(https://www.rudder-project.org/redmine/issues/11143[#11143])
* Adapt run schedule documentation and add screenshots
(https://www.rudder-project.org/redmine/issues/11139[#11139])
* Add diagram and screenshots in documentation
(https://www.rudder-project.org/redmine/issues/11137[#11137])
* Compliance logfile parsing regex
(https://www.rudder-project.org/redmine/issues/11107[#11107])
* Warn on risk of updating file format
(https://www.rudder-project.org/redmine/issues/11155[#11155])

==== Techniques

* Create a file template technique
(https://www.rudder-project.org/redmine/issues/9078[#9078])

==== System integration

* Add node-post-acceptance hook
(https://www.rudder-project.org/redmine/issues/11218[#11218])

=== Bug fixes

==== Web - UI & UX

* Fixed: If a Rule is enabled but applies no Directive, it is displayed
as Disabled
(https://www.rudder-project.org/redmine/issues/11123[#11123])
* Fixed: Wrong sort on compliance in tables
(https://www.rudder-project.org/redmine/issues/11229[#11229])
* Fixed: Disabled Rules status is invisible
(https://www.rudder-project.org/redmine/issues/11205[#11205])
* Fixed: In Directive details, tags input is broken on Iceweasel
(https://www.rudder-project.org/redmine/issues/11118[#11118])
* Fixed: Wrong XML indentation in event log
(https://www.rudder-project.org/redmine/issues/10951[#10951])
* Fixed: Add a margin between the filters and the table in Technical
logs tab (https://www.rudder-project.org/redmine/issues/11083[#11083])
* Fixed: Repaired does not appear as yellow anymore
(https://www.rudder-project.org/redmine/issues/11028[#11028])

==== Web - Nodes & inventories

* Fixed: Impossible to delete a node when policy server has been deleted
(https://www.rudder-project.org/redmine/issues/11231[#11231])
* Fixed: When we manage a Windows 2016, we donâ€™t have the proper Windows
version displayed
(https://www.rudder-project.org/redmine/issues/11172[#11172])

==== Web - Config management

* Fixed: Typo in generation error
(https://www.rudder-project.org/redmine/issues/11232[#11232])
* Fixed: Typo in unauthorized access message
(https://www.rudder-project.org/redmine/issues/11182[#11182])
* Fixed: Cannot add a directive with a " in its name in Rule
(https://www.rudder-project.org/redmine/issues/10754[#10754])

==== Documentation

* Fixed: Put warnings (about dependencies for example) before
install/upgrade instructions
(https://www.rudder-project.org/redmine/issues/11162[#11162])
* Fixed: Typo in rudder-setup usage in documentation
(https://www.rudder-project.org/redmine/issues/11136[#11136])
* Fixed: Wrong doc for restore of Rudder ldap on 4.1
(https://www.rudder-project.org/redmine/issues/11127[#11127])
* Fixed: Style broken in documentation: upgrade_from_rudder_3_1_3_2_or_4_0
(https://www.rudder-project.org/redmine/issues/11002[#11002])

==== Web - Compliance & node report

* Fixed: Reporting on old technique fails in audit mode
(https://www.rudder-project.org/redmine/issues/11152[#11152])
* Fixed: /var/log/webapp/compliance/non-compliant-reports does not
contain non-compliant (audit) report
(https://www.rudder-project.org/redmine/issues/11223[#11223])

==== Packaging

* Fixed: Backup of apache vhost by rudder-server-relay created in bad
directory (https://www.rudder-project.org/redmine/issues/10860[#10860])
* Fixed: if plugin is broken, we cannot upgrade it
(https://www.rudder-project.org/redmine/issues/11064[#11064])
* Fixed: When installing Rudder-Webapp, postinst script runs
rudder-upgrade before initializing the git, and it can fail
(https://www.rudder-project.org/redmine/issues/10990[#10990])
* Fixed: Do not show instructions for rudder-node-to-relay on root setup
(https://www.rudder-project.org/redmine/issues/10859[#10859])

==== Initial promises & sys tech

* Fixed: Check permissions on /var/rudder files, particularly
modified-files
(https://www.rudder-project.org/redmine/issues/11110[#11110])
* Fixed: Wrong stderr / stdout redirection of logs from rudder agent
check in 4.1
(https://www.rudder-project.org/redmine/issues/11044[#11044])

==== System integration

* Fixed: Non normalize hooks env var names for node info
(https://www.rudder-project.org/redmine/issues/11213[#11213])
* Fixed: Bad semantic for system error on hooks
(https://www.rudder-project.org/redmine/issues/11010[#11010])

==== Agent

* Fixed: rudder agent factory-reset bugs
(https://www.rudder-project.org/redmine/issues/10766[#10766])
* Fixed: rudder agent update -q bad exit code
(https://www.rudder-project.org/redmine/issues/11047[#11047])

==== Security

* Fixed: JSESSION cookie should be ``secure''
(https://www.rudder-project.org/redmine/issues/11159[#11159])

==== Techniques

* Fixed: Aix group technique
(https://www.rudder-project.org/redmine/issues/11235[#11235])
* Fixed: ``Package management'' technique missing ``allow untrusted''
switch (https://www.rudder-project.org/redmine/issues/10241[#10241])
* Fixed: Directive: Services Management doesnâ€™t support AIX
(https://www.rudder-project.org/redmine/issues/8752[#8752])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Ilan Costa
* Florian Heigl
* Maxime Longuet
* Janos Mattyasovszky
* David Svejda
* Dmitry Svyatogorov

This is a bug fix release in the 4.1 ESR series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.5 (2017-06-22)

=== Bug fixes

==== Initial promises & sys tech

* Fixed: Broken rsyslog configuration in 4.1
(https://www.rudder-project.org/redmine/issues/10982[#10982])

==== Miscellaneous

* Fixed: No logs when (r)?syslog(-ng)? is restarted in 4.1
(https://www.rudder-project.org/redmine/issues/10987[#10987])

=== Release notes

Note: Rudder 4.1.4 was released but quickly withdrawn because of
https://www.rudder-project.org/redmine/issues/10982[#10982].

This is a bug fix release in the 4.1 ESR series and therefore all
installations of 4.1.x should be upgraded when possible.Â When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.4 (2017-06-21)

=== Changes

==== Packaging

* Log check-rudder-agent cron job output
(https://www.rudder-project.org/redmine/issues/8438[#8438])

==== Architecture - Internal libs

* Match non exhaustive on workflow step: log on error
(https://www.rudder-project.org/redmine/issues/10938[#10938])
* Bad comparison in unique variable
(https://www.rudder-project.org/redmine/issues/10825[#10825])

==== Documentation

* Use a bigger favicon for Rudder documentation
(https://www.rudder-project.org/redmine/issues/10894[#10894])
* Document the usage of the ansible plugin
(https://www.rudder-project.org/redmine/issues/10854[#10854])

==== Agent

* Create a rudder agent command to format old logs
(https://www.rudder-project.org/redmine/issues/10708[#10708])

=== Bug fixes

==== Web - UI & UX

* Fixed: Broken display on directive screen on 3.1.20
(https://www.rudder-project.org/redmine/issues/10923[#10923])
* Fixed: Time since last generation is limited to hours
(https://www.rudder-project.org/redmine/issues/9302[#9302])
* Fixed: Node search input field are tiny and a nightmare to use
(https://www.rudder-project.org/redmine/issues/10659[#10659])
* Fixed: Directives tree overflows the page
(https://www.rudder-project.org/redmine/issues/10735[#10735])

==== Documentation

* Fixed: Agent build documentation in GitHub README is out of date
(https://www.rudder-project.org/redmine/issues/10762[#10762])
* Fixed: Document renaming of /opt/rudder/etc/ssl/rudder-webapp.crt in
4.1 (https://www.rudder-project.org/redmine/issues/10833[#10833])
* Fixed: Missing doc about required agent version for audit mode
(https://www.rudder-project.org/redmine/issues/10811[#10811])

==== Web - Config management

* Fixed: When hooks in policy-generation-node-ready or
policy-generation-node-finished fails, there is no error in the
generation (https://www.rudder-project.org/redmine/issues/10908[#10908])

==== Agent

* Fixed: check-rudder-agent doesnâ€™t purge the lmdb file when run via
cron (https://www.rudder-project.org/redmine/issues/10771[#10771])
* Fixed: If component value starts with # , report is not outputted by
rudder agent output
(https://www.rudder-project.org/redmine/issues/10601[#10601])
* Fixed: rudder agent start fails on sles12
(https://www.rudder-project.org/redmine/issues/10810[#10810])

==== Initial promises & sys tech

* Fixed: If syslog service is stopped, it is not restarted automatically
by rudder-agent, so agent doesnâ€™t report anything
(https://www.rudder-project.org/redmine/issues/8168[#8168])

==== Techniques

* Fixed: The rpmPackageInstallation technique tries to install package-*
instead of package when no version is specified
(https://www.rudder-project.org/redmine/issues/9283[#9283])
* Fixed: Improve generated inventory checks when inventory is missing
(https://www.rudder-project.org/redmine/issues/10711[#10711])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Florian Heigl
* Janos Mattyasovszky

This is a bug fix release in the 4.1 ESR series and therefore all
installations of 4.1.x should be upgraded when possible. When we release
a new version of Rudder it has been thoroughly tested, and we consider
the release enterprise-ready for deployment.

== Rudder 4.1.3 (2017-05-23)

=== Changes

==== Documentation

* Update FAQ links in the doc
(https://www.rudder-project.org/redmine/issues/10760[#10760])

=== Bug fixes

==== Web - UI & UX

* Fixed: When folding directive tree filter, the directive tree stays at
its initial size
(https://www.rudder-project.org/redmine/issues/10705[#10705])

==== Initial promises & sys tech

* Fixed: During install, inventory generated into bad file path:
/var/rudder/$\{inventory_path}
(https://www.rudder-project.org/redmine/issues/10774[#10774])

=== Release notes

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1 should be upgraded when possible. The current
``esr'' release is 3.1.*. When we release a new version of Rudder, it
has been thoroughly tested, and we consider the release enterprise-ready
for deployment

== Rudder 4.1.2 (2017-05-22)

=== Changes

==== Architecture - Internal libs

* Add a test on agent version parsing
(https://www.rudder-project.org/redmine/issues/10726[#10726])

==== Documentation

* Update server requirement with load test data
(https://www.rudder-project.org/redmine/issues/10698[#10698])
* Missing paragraph about rudder-setup installation
(https://www.rudder-project.org/redmine/issues/10691[#10691])
* Add an example of using a condition in the Technique creation tutorial
(https://www.rudder-project.org/redmine/issues/10694[#10694])
* Add Technique editor documentation
(https://www.rudder-project.org/redmine/issues/10685[#10685])
* Complete documentation introduction
(https://www.rudder-project.org/redmine/issues/10681[#10681])
* Translate the technical architecture part of introduction
(https://www.rudder-project.org/redmine/issues/10684[#10684])
* Document fully and partially supported OS
(https://www.rudder-project.org/redmine/issues/10679[#10679])
* Document more precisely the generation process
(https://www.rudder-project.org/redmine/issues/10671[#10671])
* Add a ``general presentation'' chapter in documentation
(https://www.rudder-project.org/redmine/issues/10673[#10673])
* Add relay content for requirements section
(https://www.rudder-project.org/redmine/issues/10674[#10674])
* Improve policy mode documentation
(https://www.rudder-project.org/redmine/issues/10667[#10667])
* Extend node property documentation for templates
(https://www.rudder-project.org/redmine/issues/10614[#10614])

==== Techniques

* Improve readability of system techniques reports
(https://www.rudder-project.org/redmine/issues/10632[#10632])

==== System integration

* Create a hook for pre and post node deletion event
(https://www.rudder-project.org/redmine/issues/10568[#10568])

=== Bug fixes

==== Web - UI & UX

* Fixed: Fix details in Technique editor doc
(https://www.rudder-project.org/redmine/issues/10699[#10699])
* Fixed: Cannot generate promises when invalid character in a group name
(double quote here)
(https://www.rudder-project.org/redmine/issues/10745[#10745])
* Fixed: We have no way to know that a Technique is disabled
(https://www.rudder-project.org/redmine/issues/10660[#10660])
* Fixed: Directive is still marked unused after using it
(https://www.rudder-project.org/redmine/issues/9805[#9805])
* Fixed: Logout hover background is too wide
(https://www.rudder-project.org/redmine/issues/10529[#10529])
* Fixed: Cannot go back to the previous page on node details
(https://www.rudder-project.org/redmine/issues/10515[#10515])
* Fixed: ``New'' buttons should be renamed ``Add''
(https://www.rudder-project.org/redmine/issues/10630[#10630])
* Fixed: On some resolution, top bar is on two line and we canâ€™t see the
whole directive tree
(https://www.rudder-project.org/redmine/issues/10552[#10552])
* Fixed: Mono Font text in directive form are not correctly displayed in
Chrome (https://www.rudder-project.org/redmine/issues/9780[#9780])
* Fixed: Selects in Archives page are not wide enough
(https://www.rudder-project.org/redmine/issues/10615[#10615])

==== Web - Nodes & inventories

* Fixed: In Rudder 4.1 dashboard, Nova agent are ``unknown''
(https://www.rudder-project.org/redmine/issues/10727[#10727])

==== Performance and scalability

* Fixed: Unnecessary call to inventory code to check its version during
policy validation
(https://www.rudder-project.org/redmine/issues/10641[#10641])

==== Web - Config management

* Fixed: Tooltips donâ€™t disappear on safari
(https://www.rudder-project.org/redmine/issues/6145[#6145])

==== Documentation

* Fixed: Document correctly memory usage
(https://www.rudder-project.org/redmine/issues/10744[#10744])
* Fixed: Broken links in doc
(https://www.rudder-project.org/redmine/issues/10730[#10730])
* Fixed: Missing information in Technique editor doc
(https://www.rudder-project.org/redmine/issues/10710[#10710])
* Fixed: Improve doc index and header menu
(https://www.rudder-project.org/redmine/issues/10701[#10701])
* Fixed: Documentation build broken
(https://www.rudder-project.org/redmine/issues/10700[#10700])
* Fixed: Make a nice agent output screenshot for the intro
(https://www.rudder-project.org/redmine/issues/10693[#10693])
* Fixed: Missing link toward technique editor in intro ``extensibility''
(https://www.rudder-project.org/redmine/issues/10696[#10696])
* Fixed: Add a diagram about different roles
(https://www.rudder-project.org/redmine/issues/10695[#10695])
* Fixed: Move Technique editor doc in 4.1
(https://www.rudder-project.org/redmine/issues/10697[#10697])
* Fixed: Bad links, typo, images in french in intro chapter
(https://www.rudder-project.org/redmine/issues/10690[#10690])
* Fixed: Use ``-'' in place of "_" in named reference in doc
(https://www.rudder-project.org/redmine/issues/10688[#10688])
* Fixed: Broken doc build
(https://www.rudder-project.org/redmine/issues/10687[#10687])
* Fixed: Create a ``Rudder extension and third party integration''
chapter (https://www.rudder-project.org/redmine/issues/10675[#10675])
* Fixed: Broken doc build
(https://www.rudder-project.org/redmine/issues/10680[#10680])
* Fixed: Supported Windows platforms are Windows Server 2008 and after
(https://www.rudder-project.org/redmine/issues/10656[#10656])
* Fixed: Doc: ``Regenerate now'' button has been renamed ``Update
policies'' (https://www.rudder-project.org/redmine/issues/10633[#10633])
* Fixed: Backup restoration requires disabling the agent
(https://www.rudder-project.org/redmine/issues/10639[#10639])
* Fixed: Rudder installation docs are misleading as to running
rudder-init
(https://www.rudder-project.org/redmine/issues/10624[#10624])
* Fixed: Plugin installation doc is not up-to-date for rpkg package
(https://www.rudder-project.org/redmine/issues/10555[#10555])
* Fixed: Node property documentation has error
(https://www.rudder-project.org/redmine/issues/10613[#10613])

==== Miscellaneous

* Fixed: If cf-serverd is not up, hook 50-reload-policy-file-server is
in error and breaks policy generation
(https://www.rudder-project.org/redmine/issues/10493[#10493])
* Fixed: Docs: Reference to ``TODO'' that doesnâ€™t exist
(https://www.rudder-project.org/redmine/issues/10622[#10622])
* Fixed: escaping $\{SSH_ORIGINAL_COMMAND} in GUI -
sshKeyDistribution/3.0
(https://www.rudder-project.org/redmine/issues/10715[#10715])

==== Web - Compliance & node report

* Fixed: In reports list, if the directive contains < >, then the part
in < > doesnâ€™t appear in the reports
(https://www.rudder-project.org/redmine/issues/5718[#5718])
* Fixed: When no reports has been received from a node for new policy,
message contains unexpanded variable
(https://www.rudder-project.org/redmine/issues/10636[#10636])

==== Packaging

* Fixed: Installation fails due to broken nss/nss-softokn detection on
CentOS6 (https://www.rudder-project.org/redmine/issues/10734[#10734])
* Fixed: PostgreSQL could not connect to server when installing Rudder
4.1 nightlies on Centos6
(https://www.rudder-project.org/redmine/issues/10704[#10704])
* Fixed: Broken agent build on Debian/ubuntu
(https://www.rudder-project.org/redmine/issues/10729[#10729])
* Fixed: Man pages provided in rudder-agent package are out-of-date
(https://www.rudder-project.org/redmine/issues/10432[#10432])
* Fixed: rudder-init doesnâ€™t use fully qualified path for executing
cf-agent (https://www.rudder-project.org/redmine/issues/10607[#10607])
* Fixed: rudder-pkg error on debian8: missing dependency to xz-utils
(https://www.rudder-project.org/redmine/issues/10628[#10628])
* Fixed: When fetching webapp WARs, a repository maven is created in
user home (https://www.rudder-project.org/redmine/issues/10618[#10618])

==== Initial promises & sys tech

* Fixed: Invalid generation of inventory at install
(https://www.rudder-project.org/redmine/issues/10752[#10752])
* Fixed: Agent inventory generation invalid if hostname is not defined
(https://www.rudder-project.org/redmine/issues/9829[#9829])

==== System integration

* Fixed: Script rudder-init cannot reinit ldap database
(https://www.rudder-project.org/redmine/issues/10608[#10608])
* Fixed: java.lang.InternalError when calling the internal API on Redhat
because of invalid version of nss
(https://www.rudder-project.org/redmine/issues/9905[#9905])
* Fixed: Infinite ``rudder is loading'' page if rudder-init didnâ€™t run
(https://www.rudder-project.org/redmine/issues/10567[#10567])
* Fixed: If an error happen during bootstrap, the webapp starts but is in
a zombie state and the error page is not displayed
(https://www.rudder-project.org/redmine/issues/1974[#1974])
* Fixed: rudder server debug fails on SLES 11
(https://www.rudder-project.org/redmine/issues/7892[#7892])

==== Agent

* Fixed: If component value starts with # , report is not outputted by
rudder agent output
(https://www.rudder-project.org/redmine/issues/10601[#10601])
* Fixed: Thell the user a node needs to be removed from the server when
running a factory-reset
(https://www.rudder-project.org/redmine/issues/10640[#10640])

==== Web - Maintenance

* Fixed: Adding an authorized network when ``common-root'' directive is
missing seems to work, but actually fails
(https://www.rudder-project.org/redmine/issues/8017[#8017])
* Fixed: There is small display glitch in change request display
(https://www.rudder-project.org/redmine/issues/6257[#6257])

==== Server components

* Fixed: Inventory endpoint accepts inventory even if ldap or postgresql
connectivity failed
(https://www.rudder-project.org/redmine/issues/10485[#10485])

==== Techniques

* Fixed: Technique tests do not pass on initial promises
(https://www.rudder-project.org/redmine/issues/10725[#10725])
* Fixed: Unclear field description in MOTD technique
(https://www.rudder-project.org/redmine/issues/10655[#10655])
* Fixed: Technique files contains UTF-8 chars (especially spaces)
(https://www.rudder-project.org/redmine/issues/7622[#7622])
* Fixed: ``Variable (String)'' Directive in the Directive library does
not use textarea
(https://www.rudder-project.org/redmine/issues/10585[#10585])
* Fixed: When agent run interval is not 5 minutes, lock database is
always purged
(https://www.rudder-project.org/redmine/issues/10634[#10634])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* FranÃ§ois Bayart
* Romuald Bouvard
* Jean Cardona
* Ilan Costa
* Christophe Crier
* Tristan Gallet
* Florian Heigl
* Janos Mattyasovszky
* Ferenc Ulrich
* Kiran V
* RÃ©mi VerchÃ¨re
* Josh Watt

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1 should be upgraded when possible. The current
``esr'' release is 3.1.*. When we release a new version of Rudder, it
has been thoroughly tested, and we consider the release enterprise-ready
for deployment

== Rudder 4.1.1 (2017-04-19)

=== Changes

==== Techniques

* Add tests for manageKeyValueFile
(https://www.rudder-project.org/redmine/issues/10473[#10473])

=== Bug fixes

==== Web - UI & UX

* Fixed: Different icons for magnifier in pending nodes page
(https://www.rudder-project.org/redmine/issues/10524[#10524])
* Fixed: A magnifier icon appears in the filter fild after displaying
directives that would be applied in pending nodes page
(https://www.rudder-project.org/redmine/issues/10525[#10525])
* Fixed: Buttons left-right padding is inconsistent
(https://www.rudder-project.org/redmine/issues/10528[#10528])
* Fixed: ``Reset to default'' action in ``Change Audit Logs'' doesnâ€™t
reset to install version
(https://www.rudder-project.org/redmine/issues/9391[#9391])
* Fixed: Directive column of pending nodes table is not wide enough.
(https://www.rudder-project.org/redmine/issues/10513[#10513])

==== Web - Nodes & inventories

* Fixed: Adding a json node property by UI make it a string
(https://www.rudder-project.org/redmine/issues/10569[#10569])
* Fixed: Regex search on node properties is broken: returns all nodes
with a property when no using invalid value
(https://www.rudder-project.org/redmine/issues/10570[#10570])
* Fixed: Rudder fails to accept inventories with user account different
only in their case
(https://www.rudder-project.org/redmine/issues/10545[#10545])

==== Web - Config management

* Fixed: On centos7, generation fails because of hook
policy-generation-node-ready/10-cf-promise-check
(https://www.rudder-project.org/redmine/issues/10532[#10532])
* Fixed: Cannot add node property when audit message is mandatory
(https://www.rudder-project.org/redmine/issues/10578[#10578])
* Fixed: Missing ``user techniques'' in the technique editor when
exporting / importing archive
(https://www.rudder-project.org/redmine/issues/9448[#9448])

==== Documentation

* Fixed: Broken links in 4.1 doc
(https://www.rudder-project.org/redmine/issues/10593[#10593])
* Fixed: Rudder documentation and release note donâ€™t mention the
dependency to Java 1.8 for Rudder 4.1
(https://www.rudder-project.org/redmine/issues/10548[#10548])

==== Agent

* Fixed: Policy loading is slow due to inefficient variable
manipulation
(https://www.rudder-project.org/redmine/issues/10576[#10576])
* Fixed: On upgrade from 3.1 to 4.1, policy could not be generated any
more (https://www.rudder-project.org/redmine/issues/10559[#10559])

==== Packaging

* Fixed: rudder-pkg is missing in rudder package
(https://www.rudder-project.org/redmine/issues/10556[#10556])

==== API

* Fixed: Wrong error message on directive API
(https://www.rudder-project.org/redmine/issues/10554[#10554])
* Fixed: Cannot insert a directive via the API in Rudder 4.1
(https://www.rudder-project.org/redmine/issues/10547[#10547])

==== Web - Compliance & node report

* Fixed: Compliance bar graph doesnâ€™t show small compliance numbers
(https://www.rudder-project.org/redmine/issues/10392[#10392])

==== System integration

* Fixed: Log contains debug info ``**** got string:
\{''start``:''2017-03-09 00:00:00``,''end``,''2017-03-11 00:00:00``}''
(https://www.rudder-project.org/redmine/issues/10553[#10553])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Ilan Costa
* Florian Heigl
* Janos Mattyasovszky
* Hamlyn Mootoo
* Dmitry Svyatogorov
* RÃ©mi VerchÃ¨re

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1 should be upgraded when possible. The current
``esr'' release is 3.1.*. When we release a new version of Rudder, it
has been thoroughly tested, and we consider the release enterprise-ready
for deployment

== Rudder 4.1.0 (2017-03-30)

=== Changes

==== Packaging

* rpm packages should depend on java headless
(https://www.rudder-project.org/redmine/issues/10468[#10468])

==== Web - UI & UX

* Add icon for directives which can be migrated to an upper technique
version (https://www.rudder-project.org/redmine/issues/10421[#10421])
* Add icon for directives which use deprecated technique
(https://www.rudder-project.org/redmine/issues/10420[#10420])
* Find a way to display ``deprecated'' techniques which still contain
directives in the directives tree
(https://www.rudder-project.org/redmine/issues/10229[#10229])
* Fix some details in Directives page
(https://www.rudder-project.org/redmine/issues/10384[#10384])
* Group Type order should be switched
(https://www.rudder-project.org/redmine/issues/10330[#10330])

==== Documentation

* Document how to build an agent
(https://www.rudder-project.org/redmine/issues/10333[#10333])
* Change page split level and reorganize sections
(https://www.rudder-project.org/redmine/issues/10350[#10350])

==== Performance and scalability

* Add caching information to static JS/CSS resources
(https://www.rudder-project.org/redmine/issues/4519[#4519])

==== Miscellaneous

* Add a convention for ``.disabled'' hooks to not be executed
(https://www.rudder-project.org/redmine/issues/10412[#10412])

=== Bug fixes

==== Web - UI & UX

* Fixed: ``New category'' button hides ``Categories'' title on small
screens (https://www.rudder-project.org/redmine/issues/10510[#10510])
* Fixed: Some tooltips canâ€™t overflow their container
(https://www.rudder-project.org/redmine/issues/10509[#10509])
* Fixed: A running Policy generation is not displayed on the Status
dropdown (https://www.rudder-project.org/redmine/issues/10451[#10451])
* Fixed: Directive page not displaying with ``None.get'' in logs
(https://www.rudder-project.org/redmine/issues/10501[#10501])
* Fixed: When activating change requests, the CR zone doesnâ€™t appear in
the main bar
(https://www.rudder-project.org/redmine/issues/10499[#10499])
* Fixed: GUI breaks completely with IE 11
(https://www.rudder-project.org/redmine/issues/10452[#10452])
* Fixed: padding-down instead of padding-bottom in rudder.css
(https://www.rudder-project.org/redmine/issues/10465[#10465])
* Fixed: Weird appearance of accept new nodes popup
(https://www.rudder-project.org/redmine/issues/10458[#10458])
* Fixed: Display issue on ``Accept new Nodes'' page
(https://www.rudder-project.org/redmine/issues/9165[#9165])
* Fixed: Dropdown lists in directive forms are not wide enough and hide
the contents of options
(https://www.rudder-project.org/redmine/issues/10361[#10361])
* Fixed: In the rule table, Recent changes column change size during
page loading
(https://www.rudder-project.org/redmine/issues/10340[#10340])
* Fixed: On the Rule details, if I click on ``Clone'', then cancel
action, I get switched to Settings tab
(https://www.rudder-project.org/redmine/issues/10345[#10345])
* Fixed: Directive from a whole deprecated technique are not displayed
(https://www.rudder-project.org/redmine/issues/10422[#10422])
* Fixed: ``Create with latest version'' button text is cut off in new
directive page
(https://www.rudder-project.org/redmine/issues/10358[#10358])
* Fixed: Cannot use slashes in quick search
(https://www.rudder-project.org/redmine/issues/10407[#10407])
* Fixed: Quick search text has gone a hard to read gray
(https://www.rudder-project.org/redmine/issues/10400[#10400])
* Fixed: Checkboxes in Administration menu are not locked for users with
missing permissions
(https://www.rudder-project.org/redmine/issues/9328[#9328])
* Fixed: Bad Rudder logo in src/main/webapp/images
(https://www.rudder-project.org/redmine/issues/10386[#10386])
* Fixed: Rudder (svg) logo arenâ€™t displayed with chrome
(https://www.rudder-project.org/redmine/issues/10387[#10387])
* Fixed: Tooltips are broken in Rule tables
(https://www.rudder-project.org/redmine/issues/10389[#10389])
* Fixed: Directive ``Migrate'' button is stuck to the version dropdown
list (https://www.rudder-project.org/redmine/issues/10360[#10360])
* Fixed: ``Delete #1'' button in directive formâ€™s text is not centered
(https://www.rudder-project.org/redmine/issues/10359[#10359])
* Fixed: Save button shown even no permission to change it
(https://www.rudder-project.org/redmine/issues/9819[#9819])
* Fixed: If there is an error in the Parameter edition/creation popup,
its shape change
(https://www.rudder-project.org/redmine/issues/10248[#10248])
* Fixed: Inconsistent capitalization of titles in the menu
(https://www.rudder-project.org/redmine/issues/9545[#9545])
* Fixed: Inconsistent message style in settings page
(https://www.rudder-project.org/redmine/issues/9426[#9426])
* Fixed: Wrong action named in API accounts table
(https://www.rudder-project.org/redmine/issues/10203[#10203])

==== Documentation

* Fixed: Inconsistent section order
(https://www.rudder-project.org/redmine/issues/10413[#10413])
* Fixed: Remove doc for the old quicksearch bar that has been removed
(https://www.rudder-project.org/redmine/issues/10401[#10401])

==== Web - Technique editor

* Fixed: Cannot open technique editor on SLES12
(https://www.rudder-project.org/redmine/issues/10511[#10511])

==== Web - Nodes & inventories

* Fixed: On Group page, we can click on ``Save'' on arrival on the page,
and it prevent any further saving of the Group
(https://www.rudder-project.org/redmine/issues/10376[#10376])
* Fixed: No error message in group creation popup if no name is set
(https://www.rudder-project.org/redmine/issues/10328[#10328])

==== Web - Config management

* Fixed: No generation triggered at the end of installation
(https://www.rudder-project.org/redmine/issues/10448[#10448])
* Fixed: When upgrading to 4.1,
rudder.community.checkpromises.command=/bin/true option is lost
(https://www.rudder-project.org/redmine/issues/10379[#10379])
* Fixed: Dataource can not override an existing property
(https://www.rudder-project.org/redmine/issues/10520[#10520])
* Fixed: Policy validation fails
(https://www.rudder-project.org/redmine/issues/10446[#10446])

==== Miscellaneous

* Fixed: Validation hooks should execute cf-promises by exec
(https://www.rudder-project.org/redmine/issues/10449[#10449])

==== Web - Compliance & node report

* Fixed: Several core features donâ€™t work anymore with more than 1000
nodes (https://www.rudder-project.org/redmine/issues/10456[#10456])

==== Packaging

* Fixed: slapd migration for 4.1 is not done on Ubuntu 16.04
(https://www.rudder-project.org/redmine/issues/10517[#10517])
* Fixed: Rudder 4.1 fails to install Ubuntu/Debian because of
rudder-slapd service restart
(https://www.rudder-project.org/redmine/issues/10506[#10506])
* Fixed: Error when upgrading from Rudder 3.1 to Rudder 4.1 on Debian 8
(https://www.rudder-project.org/redmine/issues/10440[#10440])
* Fixed: On SLES12, missing package rsyslog-module-pgsql
(https://www.rudder-project.org/redmine/issues/10497[#10497])
* Fixed: Use the same initial database password everywhere to avoid
breaking database connection before rudder-init
(https://www.rudder-project.org/redmine/issues/10484[#10484])
* Fixed: Relay-Api does not handle different Apache versions
(https://www.rudder-project.org/redmine/issues/10455[#10455])
* Fixed: Error on hooks on fresh install on Centos7
(https://www.rudder-project.org/redmine/issues/10436[#10436])
* Fixed: LDAP error at upgrade - Cannot allocate memory
(https://www.rudder-project.org/redmine/issues/10424[#10424])
* Fixed: On Centos 7.3, upgrading from 4.0 to 4.1 fail due to SELinux
problem (https://www.rudder-project.org/redmine/issues/10372[#10372])
* Fixed: Upgrading from 4.0 to 4.1 failed on Centos7.3, and purged LDAP
directory (https://www.rudder-project.org/redmine/issues/10373[#10373])
* Fixed: Donâ€™t display warning about configuring policy server on root
server (https://www.rudder-project.org/redmine/issues/8976[#8976])

==== Initial promises & sys tech

* Fixed: Inventory is not resent in case of error - and agent donâ€™t
report the error
(https://www.rudder-project.org/redmine/issues/10088[#10088])
* Fixed: A 4.1 agent cannot fetch its promises from a 3.1 server
(https://www.rudder-project.org/redmine/issues/10049[#10049])
* Fixed: Ignore changes generated by creation/deletion of ncf expected
reports file
(https://www.rudder-project.org/redmine/issues/10355[#10355])

==== System integration

* Fixed: Error in migration (ldap backup not found because ending by
.gz) (https://www.rudder-project.org/redmine/issues/10521[#10521])
* Fixed: Apache not started on a fresh centos7 install (selinux problem)
(https://www.rudder-project.org/redmine/issues/10426[#10426])
* Fixed: On freshly installed centos7, ldap connections fail with ``bad
auth'' (https://www.rudder-project.org/redmine/issues/10427[#10427])
* Fixed: rudder-upgrade fails if run twice
(https://www.rudder-project.org/redmine/issues/10466[#10466])
* Fixed: rudder-slapd force-stop doesnâ€™t exist on sles 12
(https://www.rudder-project.org/redmine/issues/10464[#10464])
* Fixed: rudder-reports doesnâ€™t start postgresql on postinstall on sles
12 (https://www.rudder-project.org/redmine/issues/10460[#10460])
* Fixed: Unable to setup metadata virtual space list
(https://www.rudder-project.org/redmine/issues/10444[#10444])
* Fixed: /var/log/rudder/ldap/slapd.log is full of not indexed message
(https://www.rudder-project.org/redmine/issues/10429[#10429])
* Fixed: Hook failed with fork: retry: No child processes
(https://www.rudder-project.org/redmine/issues/10457[#10457])
* Fixed: After running rudder-init, no connectivity to postgresql
(https://www.rudder-project.org/redmine/issues/10486[#10486])

==== Relay server or API

* Fixed: Error in the cron job prevents purging expired files shared
between nodes
(https://www.rudder-project.org/redmine/issues/10417[#10417])

==== Architecture - Dependencies

* Fixed: Update monix (critical bug fix)
(https://www.rudder-project.org/redmine/issues/10393[#10393])

==== Performance and scalability

* Fixed: If I click on ``Regenerate all policies'', it clears the cache
of changes, and slows down a lot the web interface
(https://www.rudder-project.org/redmine/issues/10383[#10383])
* Fixed: Enable gzip compression on text resources
(https://www.rudder-project.org/redmine/issues/10365[#10365])

==== Server components

* Fixed: slapd is not always restarted after installation of
rudder-inventory-ldap
(https://www.rudder-project.org/redmine/issues/10467[#10467])
* Fixed: In debug verbosity, logs are overflowed by logs about
com.zaxxer.hikari.pool
(https://www.rudder-project.org/redmine/issues/10471[#10471])

==== Techniques

* Fixed: Variable * techniques description refers to CFEngine technical
vocabulary (https://www.rudder-project.org/redmine/issues/10363[#10363])
* Fixed: ``Download files from the shared folder'' behaving badly?
(https://www.rudder-project.org/redmine/issues/10312[#10312])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Janos Mattyasovszky

This is a bug fix release in the 4.1 series and therefore all
installations of 4.1 should be upgraded when possible. The current
``esr'' release is 3.1.*. When we release a new version of Rudder, it
has been thoroughly tested, and we consider the release enterprise-ready
for deployment

== Rudder 4.1.0.rc1 (2017-03-07)

=== Changes

==== Web - UI & UX

* Adjust providers display in the node properties tab
(https://www.rudder-project.org/redmine/issues/10320[#10320])
* Display provider of node properties if defined
(https://www.rudder-project.org/redmine/issues/10302[#10302])
* Change graph lib to more efficient one
(https://www.rudder-project.org/redmine/issues/8171[#8171])
* Adjust the height box heightâ€™s css property instead of max-height
(https://www.rudder-project.org/redmine/issues/10252[#10252])
* Add autocomplete on rule/directive tags
(https://www.rudder-project.org/redmine/issues/10192[#10192])
* The ``Technique version'' select and ``Migrate'' button should be
aligned (https://www.rudder-project.org/redmine/issues/9938[#9938])
* Reorder and hide deprecated Techniques in Directive tree
(https://www.rudder-project.org/redmine/issues/10228[#10228])
* UI to define node properties
(https://www.rudder-project.org/redmine/issues/10169[#10169])
* Reorganize Directives page interface
(https://www.rudder-project.org/redmine/issues/10080[#10080])

==== Documentation

* Document usage of file sharing between nodes
(https://www.rudder-project.org/redmine/issues/10278[#10278])
* Add guideline for technique naming
(https://www.rudder-project.org/redmine/issues/10222[#10222])
* Use the lato font in the manual
(https://www.rudder-project.org/redmine/issues/9945[#9945])
* Add link to the new FAQ in the manual
(https://www.rudder-project.org/redmine/issues/10181[#10181])

==== Agent

* Create a cfengine_rudder class
(https://www.rudder-project.org/redmine/issues/9384[#9384])
* Improve usage of ncf logging in rudder command
(https://www.rudder-project.org/redmine/issues/9280[#9280])

==== Packaging

* Registered Plugins should be kept at upgrade
(https://www.rudder-project.org/redmine/issues/10251[#10251])
* Stop jetty before upgrading the webapp
(https://www.rudder-project.org/redmine/issues/9820[#9820])
* Embed openssl on old debian systems
(https://www.rudder-project.org/redmine/issues/10303[#10303])
* Upgrade OpenSSL to 1.0.2k
(https://www.rudder-project.org/redmine/issues/10246[#10246])
* Upgrade fusion agent to 2.3.19
(https://www.rudder-project.org/redmine/issues/9763[#9763])
* Redirect http to https in relay api
(https://www.rudder-project.org/redmine/issues/10073[#10073])

==== Initial promises & sys tech

* Remove unused body yum_remi
(https://www.rudder-project.org/redmine/issues/10349[#10349])

==== System integration

* Add a package manager for plugins
(https://www.rudder-project.org/redmine/issues/10254[#10254])

==== Techniques

* More consistent naming of techniques
(https://www.rudder-project.org/redmine/issues/10214[#10214])

=== Bug fixes

==== Web - UI & UX

* Fixed: Compliance display when hoverving over the compliance bar is
too precise (https://www.rudder-project.org/redmine/issues/9323[#9323])
* Fixed: Compliance/Recent change column should not be present by
default in directive screen
(https://www.rudder-project.org/redmine/issues/10339[#10339])
* Fixed: Compliance bar isnâ€™t display the same way in `List nodes' and
`Rules' pages
(https://www.rudder-project.org/redmine/issues/10321[#10321])
* Fixed: Display of shared files popup is broken
(https://www.rudder-project.org/redmine/issues/10329[#10329])
* Fixed: Inconsistent titles style in Rule settings
(https://www.rudder-project.org/redmine/issues/10325[#10325])
* Fixed: Disabled label disappear passing the mouse over the policy mode
label (https://www.rudder-project.org/redmine/issues/10323[#10323])
* Fixed: Cannot change schedule on Node
(https://www.rudder-project.org/redmine/issues/10318[#10318])
* Fixed: Clone group popup is broken
(https://www.rudder-project.org/redmine/issues/10307[#10307])
* Fixed: Lost space at the bottom of the group page
(https://www.rudder-project.org/redmine/issues/10281[#10281])
* Fixed: When clicking refresh in rules, grid header height change
(https://www.rudder-project.org/redmine/issues/10262[#10262])
* Fixed: When trying to create a new API account that has the same name
as an existing account, nothing happen
(https://www.rudder-project.org/redmine/issues/10250[#10250])
* Fixed: Setting title are barelly outstanding
(https://www.rudder-project.org/redmine/issues/10261[#10261])
* Fixed: Button are not correctly aligned compared to tables in 4.1
(https://www.rudder-project.org/redmine/issues/10257[#10257])
* Fixed: Rules form fields are too wide
(https://www.rudder-project.org/redmine/issues/10202[#10202])
* Fixed: Vertically center the filter line in the event logs page
(https://www.rudder-project.org/redmine/issues/10219[#10219])
* Fixed: Inconsistent titles style in the Settings page
(https://www.rudder-project.org/redmine/issues/10217[#10217])
* Fixed: Parameters description wonâ€™t show up in 4.1
(https://www.rudder-project.org/redmine/issues/10197[#10197])
* Fixed: Broken display in Rule popup creation
(https://www.rudder-project.org/redmine/issues/10182[#10182])
* Fixed: If we set a short description for a Rule, it wonâ€™t show up
anymore in the rule list
(https://www.rudder-project.org/redmine/issues/10196[#10196])

==== Web - Config management

* Fixed: Remove ``rights'' in node property
(https://www.rudder-project.org/redmine/issues/10301[#10301])
* Fixed: When we filter directive by tags, and update a directive, the
tree is refreshed without taking into account the filter
(https://www.rudder-project.org/redmine/issues/10271[#10271])
* Fixed: When we add/remove/update a tag to a Directive/Rule, we get an
empty event log
(https://www.rudder-project.org/redmine/issues/10275[#10275])
* Fixed: Tag filter creation greyed out after creating a tag filter
(https://www.rudder-project.org/redmine/issues/10272[#10272])
* Fixed: ``Migrate'' button is displayed for deprecated techniques even
if all version are deprecated
(https://www.rudder-project.org/redmine/issues/9859[#9859])

==== Techniques

* Fixed: The service management technique does not disable boot services
(https://www.rudder-project.org/redmine/issues/9872[#9872])
* Fixed: Deprecate openVPN technique
(https://www.rudder-project.org/redmine/issues/6707[#6707])

==== Web - Nodes & inventories

* Fixed: Include Timezone in Node Info
(https://www.rudder-project.org/redmine/issues/7092[#7092])
* Fixed: Improve management of rights and other metadata of node
properties (https://www.rudder-project.org/redmine/issues/10235[#10235])
* Fixed: Cannot choose between Group or category when creating a Group
(https://www.rudder-project.org/redmine/issues/10249[#10249])
* Fixed: Users with ``node_all'' security role can not change Agent
Policy Mode (https://www.rudder-project.org/redmine/issues/9936[#9936])
* Fixed: Can not see details of pending node
(https://www.rudder-project.org/redmine/issues/10174[#10174])
* Fixed: Inventories with fields containing only spaces/tabs/â€¦ may fail
to be parsed due to invalid sanitization of entry
(https://www.rudder-project.org/redmine/issues/10220[#10220])

==== Documentation

* Fixed: Doc about copying ncf technique to /var/rudder/ncf/local is
false (https://www.rudder-project.org/redmine/issues/10269[#10269])
* Fixed: Broken formatting of plugin packaging doc
(https://www.rudder-project.org/redmine/issues/10297[#10297])
* Fixed: Merge error - Link check disappeared in 4.0
(https://www.rudder-project.org/redmine/issues/10206[#10206])

==== Miscellaneous

* Fixed: Error when putting uuid.hive in inventory-updates
(https://www.rudder-project.org/redmine/issues/10070[#10070])
* Fixed: Clean tags data model
(https://www.rudder-project.org/redmine/issues/9934[#9934])
* Fixed: Promise validation errors (cf-promises) are unreadable
(https://www.rudder-project.org/redmine/issues/10175[#10175])

==== Agent

* Fixed: Scary message about OpenSSL on SLES when running rudder agent
update (https://www.rudder-project.org/redmine/issues/10066[#10066])
* Fixed: Some QEMU virtual machines are seen as physical
(https://www.rudder-project.org/redmine/issues/9616[#9616])
* Fixed: If rudder server component is stopped on Rudder root server, it
is never restarted
(https://www.rudder-project.org/redmine/issues/10258[#10258])

==== Packaging

* Fixed: make clean in rudder agent package doesnâ€™t remove
build-cfengine-stamp
(https://www.rudder-project.org/redmine/issues/10334[#10334])
* Fixed: Accept TTL with spaces in relay API
(https://www.rudder-project.org/redmine/issues/10296[#10296])
* Fixed: Error downloading perl modules with https
(https://www.rudder-project.org/redmine/issues/10264[#10264])
* Fixed: Missing prefix in asynchronous output in remote run
(https://www.rudder-project.org/redmine/issues/10190[#10190])
* Fixed: Impossible to share file due to wrong permissions for
/var/rudder/shared-files
(https://www.rudder-project.org/redmine/issues/10184[#10184])
* Fixed: version is not properly set in web interface
(https://www.rudder-project.org/redmine/issues/10107[#10107])

==== Initial promises & sys tech

* Fixed: Transient update error on ncf/local
(https://www.rudder-project.org/redmine/issues/10028[#10028])
* Fixed: Error in relay promises when there are no shared files
(https://www.rudder-project.org/redmine/issues/9881[#9881])
* Fixed: Propagate promises error when no nodes behind a relay
(https://www.rudder-project.org/redmine/issues/7671[#7671])
* Fixed: Impossible to collect reports in mission portal since #9216
(https://www.rudder-project.org/redmine/issues/10209[#10209])

==== API

* Fixed: API compatibility feature switch must be removed in 4.1
(https://www.rudder-project.org/redmine/issues/10322[#10322])
* Fixed: Log an error when Rest API fails
(https://www.rudder-project.org/redmine/issues/10295[#10295])
* Fixed: Missing timezone information in API ``node details''
(https://www.rudder-project.org/redmine/issues/10280[#10280])
* Fixed: Fix behavior of directive API and make api more consistent
(https://www.rudder-project.org/redmine/issues/10225[#10225])

==== Relay server or API

* Fixed: Allow dots in file_id in shared-files api
(https://www.rudder-project.org/redmine/issues/10338[#10338])
* Fixed: Remote-run exec for root fail with ``rudder agent was
interrupted''
(https://www.rudder-project.org/redmine/issues/10185[#10185])

==== Web - Compliance & node report

* Fixed: Recent changes arenâ€™t display sometimes on Rules list
(https://www.rudder-project.org/redmine/issues/10194[#10194])

==== Web - Maintenance

* Fixed: There is no error logged when an error occurs when updating
information of Node in Node cache
(https://www.rudder-project.org/redmine/issues/10290[#10290])
* Fixed: If the Rudder Web Interface is interrupted during the second
step of reports archiving, then it wonâ€™t never succeed in archiving
again (https://www.rudder-project.org/redmine/issues/10171[#10171])

==== Plugin - datasources

* Fixed: EventLog at promise generation for datasources change, even if
nothing changed
(https://www.rudder-project.org/redmine/issues/10198[#10198])

==== System integration

* Fixed: Log for failed login attempt is not (correctly) reported
(https://www.rudder-project.org/redmine/issues/10259[#10259])
* Fixed: Clean-up and add build information in META-INF
(https://www.rudder-project.org/redmine/issues/10253[#10253])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Dennis Cabooter
* Janos Mattyasovszky
* Hamlyn Mootoo
* Dmitry Svyatogorov

This software is in beta status and contains several new features but we
have tested it and believe it to be free of any critical bugs.Â¬The use
on production systems is not encouraged at this time and is at your own
risk. However, we do encourage testing, and welcome all and any
feedback!

== Rudder 4.1.0.beta3 (2017-02-14)

=== Changes

==== Web - UI & UX

* Add an option to not display rule status/recent changes in directives
screen (https://www.rudder-project.org/redmine/issues/10157[#10157])
* Node breakdown - show actual numbers
(https://www.rudder-project.org/redmine/issues/7422[#7422])

==== Documentation

* Document the relay API
(https://www.rudder-project.org/redmine/issues/9997[#9997])

==== Initial promises & sys tech

* Use rudder agent run as cfruncommand
(https://www.rudder-project.org/redmine/issues/10081[#10081])

==== Architecture - Dependencies

* Switch to Scala 2.12 / Lift 3.0
(https://www.rudder-project.org/redmine/issues/10127[#10127])

==== Architecture - Refactoring

* Scala actors are deprecated in scala 2.11 and removed in 2.12: update
inventory-endpoint
(https://www.rudder-project.org/redmine/issues/10119[#10119])

==== Techniques

* Deprecate old techniques versions
(https://www.rudder-project.org/redmine/issues/10159[#10159])

=== Bug fixes

==== Web - UI & UX

* Fixed: Status dropdownâ€™s display is broken
(https://www.rudder-project.org/redmine/issues/10177[#10177])
* Fixed: Display of new ``Display compliance and recent changes columns
on rule summary'' setting is broken
(https://www.rudder-project.org/redmine/issues/10173[#10173])
* Fixed: Included ``time ended'' in Status dropdown
(https://www.rudder-project.org/redmine/issues/10133[#10133])
* Fixed: On Group creation, the tooltip on the ``Save'' button doesnâ€™t
appear when it is disabled
(https://www.rudder-project.org/redmine/issues/10116[#10116])
* Fixed: Broken text fields in directive form
(https://www.rudder-project.org/redmine/issues/10164[#10164])

==== Web - Config management

* Fixed: Deadlock with simultaneous generation and new reports
(https://www.rudder-project.org/redmine/issues/10168[#10168])
* Fixed: Incomplete logging in expected reports computation
(https://www.rudder-project.org/redmine/issues/10143[#10143])
* Fixed: Renable WriteSystemTechniquesTest
(https://www.rudder-project.org/redmine/issues/10150[#10150])

==== Documentation

* Fixed: Broken link in CFEngine doc
(https://www.rudder-project.org/redmine/issues/10151[#10151])

==== Packaging

* Fixed: the shared-files directory is owned by root
(https://www.rudder-project.org/redmine/issues/10178[#10178])
* Fixed: openjdk8 cannot be installed if there is a backport in the
building os
(https://www.rudder-project.org/redmine/issues/10163[#10163])
* Fixed: rudder-techniques depends on perl(XML::TreePP)
(https://www.rudder-project.org/redmine/issues/9845[#9845])
* Fixed: Missing entry in rudder-web.properties after update to 4.1.0.b2
(https://www.rudder-project.org/redmine/issues/10132[#10132])
* Fixed: rudder-relay has bad ``sed'' line
(https://www.rudder-project.org/redmine/issues/10131[#10131])

==== Initial promises & sys tech

* Fixed: Download Shared from node and to nodes fail because
/var/rudder/share-files is non existent (on centos)
(https://www.rudder-project.org/redmine/issues/10085[#10085])

==== API

* Fixed: Allow relay-api to make asynchronous remote run call with
output (https://www.rudder-project.org/redmine/issues/10114[#10114])

==== Architecture - Dependencies

* Fixed: Test broken with ``FileNotFoundException /ldap/bootstrap.ldif''
(https://www.rudder-project.org/redmine/issues/10147[#10147])
* Fixed: warning: Class javax.annotation.Nonnull not found - continuing
with a stub.
(https://www.rudder-project.org/redmine/issues/10146[#10146])
* Fixed: warning: Class javax.annotation.Nonnull not found - continuing
with a stub.
(https://www.rudder-project.org/redmine/issues/10146[#10146])
* Fixed: Use correct repository definition in pom.xml
(https://www.rudder-project.org/redmine/issues/10120[#10120])

==== Server components

* Fixed: pass ttl through url parameters in sharedfiles api
(https://www.rudder-project.org/redmine/issues/10138[#10138])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Janos Mattyasovszky

This software is in beta status and contains several new features but we
have tested it and believe it to be free of any critical bugs.Â¬The use
on production systems is not encouraged at this time and is at your own
risk. However, we do encourage testing, and welcome all and any
feedback!

== Rudder 4.1.0~beta2 (2017-02-02)

=== Changes

==== Web - UI & UX

* Reorganize Rules page interface
(https://issues.rudder.io/issues/9960[#9960])

==== Web - Config management

* Remove all datasource code from Rudder main and add needed hooks
(https://issues.rudder.io/issues/10050[#10050])

==== Agent

* Extend rudder-sign to add new information
(https://issues.rudder.io/issues/9996[#9996])
* Warn the user if rudder agent is not run as root
(https://issues.rudder.io/issues/9684[#9684])

==== Packaging

* Permit skipping scala build within packages
(https://issues.rudder.io/issues/10055[#10055])
* use suse_version instead of sles_version during build
(https://issues.rudder.io/issues/9919[#9919])
* Automatically set year in Rudder interface at build time
(https://issues.rudder.io/issues/9891[#9891])

==== API

* Deprecate API v5, v6 and v7, and remove API v2,3,4
(https://issues.rudder.io/issues/9836[#9836])
* Remote run API should use relay API
(https://issues.rudder.io/issues/9714[#9714])

==== Architecture - Dependencies

* Requires Java8 (jdk8) for Rudder 4.1
(https://issues.rudder.io/issues/9917[#9917])

=== Bug fixes

==== Packaging

* Fixed: Wrong ncf version dependency in 4.1
(https://issues.rudder.io/issues/10091[#10091])
* Fixed: On CentOS relay API uses /etc/httpd/logs/wsgi.18610.0.1.sock
(https://issues.rudder.io/issues/10072[#10072])
* Fixed: The user trying to open nodes list in relay-api is not rudder
(https://issues.rudder.io/issues/10068[#10068])
* Fixed: Wrong permission for /etc/sudoers.d/rudder-relay file on Sles
(https://issues.rudder.io/issues/10065[#10065])
* Fixed: Remove rudder-apache-common.conf in postinstall
(https://issues.rudder.io/issues/10041[#10041])
* Fixed: Not having set %\{real_name} does operate on /bin
(https://issues.rudder.io/issues/10003[#10003])
* Fixed: Allow to restrict edits on sudoers during install
(https://issues.rudder.io/issues/10001[#10001])

==== Web - Config management

* Fixed: When I save a Directive, after cliking ``save'', itâ€™s not
possible to scroll anymore in the Directive tree
(https://issues.rudder.io/issues/10010[#10010])

==== Server components

* Fixed: the relay api should read nodeslist on each call
(https://issues.rudder.io/issues/10111[#10111])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Janos Mattyasovszky

This software is in beta status and contains several new features but we
have tested it and believe it to be free of any critical bugs.Â¬The use
on production systems is not encouraged at this time and is at your own
risk. However, we do encourage testing, and welcome all and any
feedback!

== Rudder 4.1.0~beta1 (2017-01-17)

=== Changes

==== Web - Config management

* Add tags in Directive/Rules
(https://issues.rudder.io/issues/9733[#9733])
* Import node properties from external data sources
(https://issues.rudder.io/issues/9698[#9698])

==== API

* Add a Relay API: share files between nodes, launch run on remote run
behind relay (https://issues.rudder.io/issues/9707[#9707])

==== Server components

* Implement notifications for different server-side actions and events
(hooks) (https://issues.rudder.io/issues/8353[#8353])

==== Web - UI & UX

* Improve Json display in the Nodes properties tab
(https://issues.rudder.io/issues/9984[#9984])

==== Packaging

* ncf-api-venv user should not have access to a shell
(https://issues.rudder.io/issues/9993[#9993])
* Build slapd with lmdb
(https://issues.rudder.io/issues/9839[#9839])
* Upgrade CFEngine in Rudder agent to 3.10
(https://issues.rudder.io/issues/9737[#9737])

==== System integration

* Do not create a temporary cron a postinstall
(https://issues.rudder.io/issues/9860[#9860])

==== Architecture - Refactoring

* Store node compliance in database
(https://issues.rudder.io/issues/9645[#9645])

==== Architecture - Internal libs

* Change pom version on master to 4.1
(https://issues.rudder.io/issues/9686[#9686])

==== Documentation

* Prepare manual for 4.1
(https://issues.rudder.io/issues/9887[#9887])
* Change doc title for 4.1
(https://issues.rudder.io/issues/9753[#9753])

=== Bug fixes

==== Web - UI & UX

* Fixed: Put in bold rule formâ€™s required fields label
(https://issues.rudder.io/issues/9949[#9949])
* Fixed: Nothing happens when trying to save a Directive
(https://issues.rudder.io/issues/9948[#9948])
* Fixed: Put in bold ``Technique version'' label
(https://issues.rudder.io/issues/9935[#9935])

==== Packaging

* Fixed: build-caching doesnâ€™t work
(https://issues.rudder.io/issues/9921[#9921])
* Fixed: virtualenv doesnâ€™t work in the build environment
(https://issues.rudder.io/issues/9824[#9824])

==== Initial promises & sys tech

* Fixed: FusionInventory â€“scan-homedirs should not be on by default
(https://issues.rudder.io/issues/7421[#7421])

==== Documentation

* Fixed: We should disable link tests for the manual on master
(https://issues.rudder.io/issues/9803[#9803])

==== Web - Config management

* Fixed: Rule details text can be misleading
(https://issues.rudder.io/issues/6143[#6143])

=== Release notes

Special thanks go out to the following individuals who invested time,
patience, testing, patches or bug reports to make this version of Rudder
better:

* Florial Heigl
* Janos Mattyasovszky

This software is in beta status and contains several new features but we
have tested it and believe it to be free of any critical bugs.Â¬The use
on production systems is not encouraged at this time and is at your own
risk. However, we do encourage testing, and welcome all and any
feedback!
